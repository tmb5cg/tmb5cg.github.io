{"ast":null,"code":"var _jsxFileName = \"/Users/tucker/git/tmb5cg.github.io/src/components/GroceryLister/SubmitRecipeForm.js\",\n  _s = $RefreshSig$();\nimport * as React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./GroceryLister.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SubmitRecipeForm = props => {\n  _s();\n  const inputRef = React.useRef(null);\n  const handleTextboxChange = event => {\n    props.setInputUrl(event.target.value);\n  };\n  const handleInvalidInput = () => {\n    alert(\"Invalid URL!\");\n  };\n  const handleParseError = () => {\n    alert(\"Unsupported recipe :(\");\n  };\n  const handleClick = () => {\n    getIngredients(props.inputUrl);\n  };\n  const getIngredients = function (e) {\n    if (isValidHttpUrl(props.inputUrl)) {\n      console.log(\"yes\");\n      axios({\n        method: \"POST\",\n        url: \"https://scanned-photo-split.herokuapp.com/getingredients?url=\" + props.inputUrl,\n        // url: \"http://127.0.0.1:5000/getingredients?url=\" + url,\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }).then(function (response) {\n        console.log(response.data);\n        // insert useeffect here\n        var newIngredients = [];\n        for (let i = 0; i < response.data.ingredients.length; i++) {\n          // var newIngredient = createData(Math.random() * 1000, response.data.name, response.data.ingredients[i])\n          var newIngredient = createData(props.inputUrl, Math.random() * 1000, response.data.name, response.data.ingredients[i], response.data.detailed[i][\"name\"], response.data.detailed[i][\"qty\"], response.data.detailed[i][\"unit\"]);\n          newIngredients.push(newIngredient);\n        }\n        props.setIngredients(props.ingredients.concat(newIngredients));\n        var rec = createRecipe(props.inputUrl, response.data.name, response.data.servings);\n        props.setRecipes([...props.recipes, rec]);\n      }).catch(function (response) {\n        handleParseError();\n      });\n    } else {\n      handleInvalidInput();\n    }\n  };\n  const clearIngredients = () => {\n    localStorage.setItem(\"ingredients\", JSON.stringify([]));\n    localStorage.setItem(\"recipes\", JSON.stringify([]));\n    props.setIngredients([]);\n    props.setRecipes([]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"submit-recipe-container\",\n      onSubmit: e => e.preventDefault(),\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        style: {\n          boxShadow: \"0px 0px 3px 2px #0077c9\"\n        },\n        ref: inputRef,\n        placeholder: \"Recipe URL\",\n        onChange: handleTextboxChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-submit\",\n        onClick: handleClick,\n        children: \"Fetch ingredients\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-clear\",\n        onClick: clearIngredients,\n        children: \"Clear ingredients\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(SubmitRecipeForm, \"iD9XNNsNOlNDckBemnvlLS+aHYk=\");\n_c = SubmitRecipeForm;\nfunction createData(recipeId, ingredientId, recipeTitle, rawIngredientText, cleanIngredient, amount, unit) {\n  // return { url, name, ingredient, qty, unit };\n  return {\n    recipeId,\n    ingredientId,\n    recipeTitle,\n    rawIngredientText,\n    cleanIngredient,\n    amount,\n    unit\n  };\n}\nfunction createRecipe(url, title, servings) {\n  // return { url, name, ingredient, qty, unit };\n  return {\n    url,\n    title,\n    servings\n  };\n}\nfunction isValidHttpUrl(string) {\n  let url;\n  try {\n    url = new URL(string);\n  } catch (_) {\n    return false;\n  }\n  return url.protocol === \"http:\" || url.protocol === \"https:\";\n}\nexport default SubmitRecipeForm;\nvar _c;\n$RefreshReg$(_c, \"SubmitRecipeForm\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","SubmitRecipeForm","props","_s","inputRef","useRef","handleTextboxChange","event","setInputUrl","target","value","handleInvalidInput","alert","handleParseError","handleClick","getIngredients","inputUrl","e","isValidHttpUrl","console","log","method","url","headers","then","response","data","newIngredients","i","ingredients","length","newIngredient","createData","Math","random","name","detailed","push","setIngredients","concat","rec","createRecipe","servings","setRecipes","recipes","catch","clearIngredients","localStorage","setItem","JSON","stringify","children","className","onSubmit","preventDefault","type","style","boxShadow","ref","placeholder","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","recipeId","ingredientId","recipeTitle","rawIngredientText","cleanIngredient","amount","unit","title","string","URL","_","protocol","$RefreshReg$"],"sources":["/Users/tucker/git/tmb5cg.github.io/src/components/GroceryLister/SubmitRecipeForm.js"],"sourcesContent":["import * as React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./GroceryLister.css\";\n\nconst SubmitRecipeForm = (props) => {\n  const inputRef = React.useRef(null);\n  const handleTextboxChange = (event) => {\n    props.setInputUrl(event.target.value);\n  };\n\n  const handleInvalidInput = () => {\n    alert(\"Invalid URL!\");\n  };\n\n  const handleParseError = () => {\n    alert(\"Unsupported recipe :(\");\n  };\n\n  const handleClick = () => {\n    getIngredients(props.inputUrl);\n  };\n\n  const getIngredients = function (e) {\n    if (isValidHttpUrl(props.inputUrl)) {\n      console.log(\"yes\");\n      axios({\n        method: \"POST\",\n        url:\n          \"https://scanned-photo-split.herokuapp.com/getingredients?url=\" +\n          props.inputUrl,\n        // url: \"http://127.0.0.1:5000/getingredients?url=\" + url,\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      })\n        .then(function (response) {\n          console.log(response.data);\n          // insert useeffect here\n          var newIngredients = [];\n          for (let i = 0; i < response.data.ingredients.length; i++) {\n            // var newIngredient = createData(Math.random() * 1000, response.data.name, response.data.ingredients[i])\n            var newIngredient = createData(\n              props.inputUrl,\n              Math.random() * 1000,\n              response.data.name,\n              response.data.ingredients[i],\n              response.data.detailed[i][\"name\"],\n              response.data.detailed[i][\"qty\"],\n              response.data.detailed[i][\"unit\"]\n            );\n\n            newIngredients.push(newIngredient);\n          }\n          props.setIngredients(props.ingredients.concat(newIngredients));\n          var rec = createRecipe(\n            props.inputUrl,\n            response.data.name,\n            response.data.servings\n          );\n          props.setRecipes([...props.recipes, rec]);\n        })\n        .catch(function (response) {\n          handleParseError();\n        });\n    } else {\n      handleInvalidInput();\n    }\n  };\n\n  const clearIngredients = () => {\n    localStorage.setItem(\"ingredients\", JSON.stringify([]));\n    localStorage.setItem(\"recipes\", JSON.stringify([]));\n    props.setIngredients([]);\n    props.setRecipes([]);\n  };\n  return (\n    <div>\n      <form\n        className=\"submit-recipe-container\"\n        onSubmit={(e) => e.preventDefault()}\n      >\n        <input\n          type=\"text\"\n          style={{ boxShadow: \"0px 0px 3px 2px #0077c9\" }}\n          ref={inputRef}\n          placeholder=\"Recipe URL\"\n          onChange={handleTextboxChange}\n        />\n        <button className=\"button-submit\" onClick={handleClick}>\n          Fetch ingredients\n        </button>\n        <button className=\"button-clear\" onClick={clearIngredients}>\n          Clear ingredients\n        </button>\n      </form>\n    </div>\n  );\n};\n\nfunction createData(\n  recipeId,\n  ingredientId,\n  recipeTitle,\n  rawIngredientText,\n  cleanIngredient,\n  amount,\n  unit\n) {\n  // return { url, name, ingredient, qty, unit };\n  return {\n    recipeId,\n    ingredientId,\n    recipeTitle,\n    rawIngredientText,\n    cleanIngredient,\n    amount,\n    unit,\n  };\n}\n\nfunction createRecipe(url, title, servings) {\n  // return { url, name, ingredient, qty, unit };\n  return {\n    url,\n    title,\n    servings,\n  };\n}\n\nfunction isValidHttpUrl(string) {\n  let url;\n  try {\n    url = new URL(string);\n  } catch (_) {\n    return false;\n  }\n  return url.protocol === \"http:\" || url.protocol === \"https:\";\n}\n\nexport default SubmitRecipeForm;\n"],"mappings":";;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,qBAAqB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7B,MAAMC,gBAAgB,GAAIC,KAAK,IAAK;EAAAC,EAAA;EAClC,MAAMC,QAAQ,GAAGT,KAAK,CAACU,MAAM,CAAC,IAAI,CAAC;EACnC,MAAMC,mBAAmB,GAAIC,KAAK,IAAK;IACrCL,KAAK,CAACM,WAAW,CAACD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC;EACvC,CAAC;EAED,MAAMC,kBAAkB,GAAGA,CAAA,KAAM;IAC/BC,KAAK,CAAC,cAAc,CAAC;EACvB,CAAC;EAED,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;IAC7BD,KAAK,CAAC,uBAAuB,CAAC;EAChC,CAAC;EAED,MAAME,WAAW,GAAGA,CAAA,KAAM;IACxBC,cAAc,CAACb,KAAK,CAACc,QAAQ,CAAC;EAChC,CAAC;EAED,MAAMD,cAAc,GAAG,SAAAA,CAAUE,CAAC,EAAE;IAClC,IAAIC,cAAc,CAAChB,KAAK,CAACc,QAAQ,CAAC,EAAE;MAClCG,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;MAClBtB,KAAK,CAAC;QACJuB,MAAM,EAAE,MAAM;QACdC,GAAG,EACD,+DAA+D,GAC/DpB,KAAK,CAACc,QAAQ;QAChB;QACAO,OAAO,EAAE;UAAE,cAAc,EAAE;QAAsB;MACnD,CAAC,CAAC,CACCC,IAAI,CAAC,UAAUC,QAAQ,EAAE;QACxBN,OAAO,CAACC,GAAG,CAACK,QAAQ,CAACC,IAAI,CAAC;QAC1B;QACA,IAAIC,cAAc,GAAG,EAAE;QACvB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,QAAQ,CAACC,IAAI,CAACG,WAAW,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;UACzD;UACA,IAAIG,aAAa,GAAGC,UAAU,CAC5B9B,KAAK,CAACc,QAAQ,EACdiB,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,IAAI,EACpBT,QAAQ,CAACC,IAAI,CAACS,IAAI,EAClBV,QAAQ,CAACC,IAAI,CAACG,WAAW,CAACD,CAAC,CAAC,EAC5BH,QAAQ,CAACC,IAAI,CAACU,QAAQ,CAACR,CAAC,CAAC,CAAC,MAAM,CAAC,EACjCH,QAAQ,CAACC,IAAI,CAACU,QAAQ,CAACR,CAAC,CAAC,CAAC,KAAK,CAAC,EAChCH,QAAQ,CAACC,IAAI,CAACU,QAAQ,CAACR,CAAC,CAAC,CAAC,MAAM,CAClC,CAAC;UAEDD,cAAc,CAACU,IAAI,CAACN,aAAa,CAAC;QACpC;QACA7B,KAAK,CAACoC,cAAc,CAACpC,KAAK,CAAC2B,WAAW,CAACU,MAAM,CAACZ,cAAc,CAAC,CAAC;QAC9D,IAAIa,GAAG,GAAGC,YAAY,CACpBvC,KAAK,CAACc,QAAQ,EACdS,QAAQ,CAACC,IAAI,CAACS,IAAI,EAClBV,QAAQ,CAACC,IAAI,CAACgB,QAChB,CAAC;QACDxC,KAAK,CAACyC,UAAU,CAAC,CAAC,GAAGzC,KAAK,CAAC0C,OAAO,EAAEJ,GAAG,CAAC,CAAC;MAC3C,CAAC,CAAC,CACDK,KAAK,CAAC,UAAUpB,QAAQ,EAAE;QACzBZ,gBAAgB,CAAC,CAAC;MACpB,CAAC,CAAC;IACN,CAAC,MAAM;MACLF,kBAAkB,CAAC,CAAC;IACtB;EACF,CAAC;EAED,MAAMmC,gBAAgB,GAAGA,CAAA,KAAM;IAC7BC,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEC,IAAI,CAACC,SAAS,CAAC,EAAE,CAAC,CAAC;IACvDH,YAAY,CAACC,OAAO,CAAC,SAAS,EAAEC,IAAI,CAACC,SAAS,CAAC,EAAE,CAAC,CAAC;IACnDhD,KAAK,CAACoC,cAAc,CAAC,EAAE,CAAC;IACxBpC,KAAK,CAACyC,UAAU,CAAC,EAAE,CAAC;EACtB,CAAC;EACD,oBACE3C,OAAA;IAAAmD,QAAA,eACEnD,OAAA;MACEoD,SAAS,EAAC,yBAAyB;MACnCC,QAAQ,EAAGpC,CAAC,IAAKA,CAAC,CAACqC,cAAc,CAAC,CAAE;MAAAH,QAAA,gBAEpCnD,OAAA;QACEuD,IAAI,EAAC,MAAM;QACXC,KAAK,EAAE;UAAEC,SAAS,EAAE;QAA0B,CAAE;QAChDC,GAAG,EAAEtD,QAAS;QACduD,WAAW,EAAC,YAAY;QACxBC,QAAQ,EAAEtD;MAAoB;QAAAuD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC/B,CAAC,eACFhE,OAAA;QAAQoD,SAAS,EAAC,eAAe;QAACa,OAAO,EAAEnD,WAAY;QAAAqC,QAAA,EAAC;MAExD;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACThE,OAAA;QAAQoD,SAAS,EAAC,cAAc;QAACa,OAAO,EAAEnB,gBAAiB;QAAAK,QAAA,EAAC;MAE5D;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEV,CAAC;AAAC7D,EAAA,CA3FIF,gBAAgB;AAAAiE,EAAA,GAAhBjE,gBAAgB;AA6FtB,SAAS+B,UAAUA,CACjBmC,QAAQ,EACRC,YAAY,EACZC,WAAW,EACXC,iBAAiB,EACjBC,eAAe,EACfC,MAAM,EACNC,IAAI,EACJ;EACA;EACA,OAAO;IACLN,QAAQ;IACRC,YAAY;IACZC,WAAW;IACXC,iBAAiB;IACjBC,eAAe;IACfC,MAAM;IACNC;EACF,CAAC;AACH;AAEA,SAAShC,YAAYA,CAACnB,GAAG,EAAEoD,KAAK,EAAEhC,QAAQ,EAAE;EAC1C;EACA,OAAO;IACLpB,GAAG;IACHoD,KAAK;IACLhC;EACF,CAAC;AACH;AAEA,SAASxB,cAAcA,CAACyD,MAAM,EAAE;EAC9B,IAAIrD,GAAG;EACP,IAAI;IACFA,GAAG,GAAG,IAAIsD,GAAG,CAACD,MAAM,CAAC;EACvB,CAAC,CAAC,OAAOE,CAAC,EAAE;IACV,OAAO,KAAK;EACd;EACA,OAAOvD,GAAG,CAACwD,QAAQ,KAAK,OAAO,IAAIxD,GAAG,CAACwD,QAAQ,KAAK,QAAQ;AAC9D;AAEA,eAAe7E,gBAAgB;AAAC,IAAAiE,EAAA;AAAAa,YAAA,CAAAb,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}