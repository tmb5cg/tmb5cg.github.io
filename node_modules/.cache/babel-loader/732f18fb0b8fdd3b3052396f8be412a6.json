{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GraphQLWebSocketClient = void 0;\n\nvar types_1 = require(\"./types\");\n\nvar resolveRequestDocument_1 = require(\"./resolveRequestDocument\");\n\nvar CONNECTION_INIT = 'connection_init';\nvar CONNECTION_ACK = 'connection_ack';\nvar PING = 'ping';\nvar PONG = 'pong';\nvar SUBSCRIBE = 'subscribe';\nvar NEXT = 'next';\nvar ERROR = 'error';\nvar COMPLETE = 'complete';\n\nvar GraphQLWebSocketMessage =\n/** @class */\nfunction () {\n  function GraphQLWebSocketMessage(type, payload, id) {\n    this._type = type;\n    this._payload = payload;\n    this._id = id;\n  }\n\n  Object.defineProperty(GraphQLWebSocketMessage.prototype, \"type\", {\n    get: function () {\n      return this._type;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(GraphQLWebSocketMessage.prototype, \"id\", {\n    get: function () {\n      return this._id;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(GraphQLWebSocketMessage.prototype, \"payload\", {\n    get: function () {\n      return this._payload;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(GraphQLWebSocketMessage.prototype, \"text\", {\n    get: function () {\n      var result = {\n        type: this.type\n      };\n      if (this.id != null && this.id != undefined) result.id = this.id;\n      if (this.payload != null && this.payload != undefined) result.payload = this.payload;\n      return JSON.stringify(result);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  GraphQLWebSocketMessage.parse = function (data, f) {\n    var _a = JSON.parse(data),\n        type = _a.type,\n        payload = _a.payload,\n        id = _a.id;\n\n    return new GraphQLWebSocketMessage(type, f(payload), id);\n  };\n\n  return GraphQLWebSocketMessage;\n}();\n\nvar GraphQLWebSocketClient =\n/** @class */\nfunction () {\n  function GraphQLWebSocketClient(socket, _a) {\n    var onInit = _a.onInit,\n        onAcknowledged = _a.onAcknowledged,\n        onPing = _a.onPing,\n        onPong = _a.onPong;\n\n    var _this = this;\n\n    this.socketState = {\n      acknowledged: false,\n      lastRequestId: 0,\n      subscriptions: {}\n    };\n    this.socket = socket;\n\n    socket.onopen = function (e) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var _a, _b, _c, _d;\n\n        return __generator(this, function (_e) {\n          switch (_e.label) {\n            case 0:\n              this.socketState.acknowledged = false;\n              this.socketState.subscriptions = {};\n              _b = (_a = socket).send;\n              _c = ConnectionInit;\n              if (!onInit) return [3\n              /*break*/\n              , 2];\n              return [4\n              /*yield*/\n              , onInit()];\n\n            case 1:\n              _d = _e.sent();\n              return [3\n              /*break*/\n              , 3];\n\n            case 2:\n              _d = null;\n              _e.label = 3;\n\n            case 3:\n              _b.apply(_a, [_c.apply(void 0, [_d]).text]);\n\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    };\n\n    socket.onclose = function (e) {\n      _this.socketState.acknowledged = false;\n      _this.socketState.subscriptions = {};\n    };\n\n    socket.onerror = function (e) {\n      console.error(e);\n    };\n\n    socket.onmessage = function (e) {\n      try {\n        var message = parseMessage(e.data);\n\n        switch (message.type) {\n          case CONNECTION_ACK:\n            {\n              if (_this.socketState.acknowledged) {\n                console.warn('Duplicate CONNECTION_ACK message ignored');\n              } else {\n                _this.socketState.acknowledged = true;\n                if (onAcknowledged) onAcknowledged(message.payload);\n              }\n\n              return;\n            }\n\n          case PING:\n            {\n              if (onPing) onPing(message.payload).then(function (r) {\n                return socket.send(Pong(r).text);\n              });else socket.send(Pong(null).text);\n              return;\n            }\n\n          case PONG:\n            {\n              if (onPong) onPong(message.payload);\n              return;\n            }\n        }\n\n        if (!_this.socketState.acknowledged) {\n          // Web-socket connection not acknowledged\n          return;\n        }\n\n        if (message.id === undefined || message.id === null || !_this.socketState.subscriptions[message.id]) {\n          // No subscription identifer or subscription indentifier is not found\n          return;\n        }\n\n        var _a = _this.socketState.subscriptions[message.id],\n            query = _a.query,\n            variables = _a.variables,\n            subscriber = _a.subscriber;\n\n        switch (message.type) {\n          case NEXT:\n            {\n              if (!message.payload.errors && message.payload.data) {\n                subscriber.next && subscriber.next(message.payload.data);\n              }\n\n              if (message.payload.errors) {\n                subscriber.error && subscriber.error(new types_1.ClientError(__assign(__assign({}, message.payload), {\n                  status: 200\n                }), {\n                  query: query,\n                  variables: variables\n                }));\n              } else {}\n\n              return;\n            }\n\n          case ERROR:\n            {\n              subscriber.error && subscriber.error(new types_1.ClientError({\n                errors: message.payload,\n                status: 200\n              }, {\n                query: query,\n                variables: variables\n              }));\n              return;\n            }\n\n          case COMPLETE:\n            {\n              subscriber.complete && subscriber.complete();\n              delete _this.socketState.subscriptions[message.id];\n              return;\n            }\n        }\n      } catch (e) {\n        // Unexpected errors while handling graphql-ws message\n        console.error(e);\n        socket.close(1006);\n      }\n\n      socket.close(4400, 'Unknown graphql-ws message.');\n    };\n  }\n\n  GraphQLWebSocketClient.prototype.makeSubscribe = function (query, operationName, subscriber, variables) {\n    var _this = this;\n\n    var subscriptionId = (this.socketState.lastRequestId++).toString();\n    this.socketState.subscriptions[subscriptionId] = {\n      query: query,\n      variables: variables,\n      subscriber: subscriber\n    };\n    this.socket.send(Subscribe(subscriptionId, {\n      query: query,\n      operationName: operationName,\n      variables: variables\n    }).text);\n    return function () {\n      _this.socket.send(Complete(subscriptionId).text);\n\n      delete _this.socketState.subscriptions[subscriptionId];\n    };\n  };\n\n  GraphQLWebSocketClient.prototype.rawRequest = function (query, variables) {\n    var _this = this;\n\n    return new Promise(function (resolve, reject) {\n      var result;\n\n      _this.rawSubscribe(query, {\n        next: function (data, extensions) {\n          return result = {\n            data: data,\n            extensions: extensions\n          };\n        },\n        error: reject,\n        complete: function () {\n          return resolve(result);\n        }\n      }, variables);\n    });\n  };\n\n  GraphQLWebSocketClient.prototype.request = function (document, variables) {\n    var _this = this;\n\n    return new Promise(function (resolve, reject) {\n      var result;\n\n      _this.subscribe(document, {\n        next: function (data) {\n          return result = data;\n        },\n        error: reject,\n        complete: function () {\n          return resolve(result);\n        }\n      }, variables);\n    });\n  };\n\n  GraphQLWebSocketClient.prototype.subscribe = function (document, subscriber, variables) {\n    var _a = (0, resolveRequestDocument_1.resolveRequestDocument)(document),\n        query = _a.query,\n        operationName = _a.operationName;\n\n    return this.makeSubscribe(query, operationName, subscriber, variables);\n  };\n\n  GraphQLWebSocketClient.prototype.rawSubscribe = function (query, subscriber, variables) {\n    return this.makeSubscribe(query, undefined, subscriber, variables);\n  };\n\n  GraphQLWebSocketClient.prototype.ping = function (payload) {\n    this.socket.send(Ping(payload).text);\n  };\n\n  GraphQLWebSocketClient.prototype.close = function () {\n    this.socket.close(1000);\n  };\n\n  GraphQLWebSocketClient.PROTOCOL = 'graphql-transport-ws';\n  return GraphQLWebSocketClient;\n}();\n\nexports.GraphQLWebSocketClient = GraphQLWebSocketClient; // Helper functions\n\nfunction parseMessage(data, f) {\n  if (f === void 0) {\n    f = function (a) {\n      return a;\n    };\n  }\n\n  var m = GraphQLWebSocketMessage.parse(data, f);\n  return m;\n}\n\nfunction ConnectionInit(payload) {\n  return new GraphQLWebSocketMessage(CONNECTION_INIT, payload);\n}\n\nfunction Ping(payload) {\n  return new GraphQLWebSocketMessage(PING, payload, undefined);\n}\n\nfunction Pong(payload) {\n  return new GraphQLWebSocketMessage(PONG, payload, undefined);\n}\n\nfunction Subscribe(id, payload) {\n  return new GraphQLWebSocketMessage(SUBSCRIBE, payload, id);\n}\n\nfunction Complete(id) {\n  return new GraphQLWebSocketMessage(COMPLETE, undefined, id);\n}","map":{"version":3,"mappings":"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","names":["CONNECTION_INIT","CONNECTION_ACK","PING","PONG","SUBSCRIBE","NEXT","ERROR","COMPLETE","type","payload","id","_type","_payload","_id","Object","GraphQLWebSocketMessage","result","undefined","JSON","stringify","data","f","parse","socket","_a","onInit","onAcknowledged","onPing","onPong","acknowledged","lastRequestId","subscriptions","onopen","e","socketState","_b","send","_c","_d","text","onclose","_this","onerror","console","error","onmessage","message","parseMessage","warn","then","r","Pong","query","variables","subscriber","errors","next","types_1","__assign","status","complete","close","GraphQLWebSocketClient","operationName","subscriptionId","toString","Subscribe","Complete","Promise","resolve","reject","rawSubscribe","extensions","document","subscribe","makeSubscribe","Ping","exports","a","m","ConnectionInit"],"sourceRoot":"","sources":["../src/graphql-ws.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}