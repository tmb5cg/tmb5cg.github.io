{"ast":null,"code":"var _jsxFileName = \"/Users/tucker/Documents/GitHub/tmb5cg.github.io/src/components/FreeTimeFinder/CalendarOutput.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Calendar from './Calendar.js';\nimport format from \"date-fns/format\";\nimport { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CalendarOutput = props => {\n  _s();\n\n  const [freeTimes, setFreeTimes] = useState(); // const [outputReady, setOutputReady] = useState(false)\n\n  const allStartTimes = [];\n  const allEndTimes = [];\n  const busyBlocksToAdd = [];\n\n  const fetchFreeTimes = () => {\n    // Check if endDate is set, if not set to startDate\n    // Format start date to 8am\n    var start = new Date(props.startDate);\n    start.setHours(8);\n    start.setMinutes(0);\n    start.setSeconds(0);\n    start = start.toISOString(); // Format end date to 8 pm\n\n    let end = '';\n\n    if (props.endDate === null) {\n      end = new Date(props.startDate);\n      const piza = new Date(props.startDate);\n      props.setEndDate(piza);\n      end = new Date(piza);\n    } else {\n      end = new Date(props.endDate);\n    }\n\n    end.setHours(20);\n    end.setMinutes(0);\n    end.setSeconds(0);\n    end = end.toISOString();\n    console.log(start);\n    console.log(end); // Build request body\n\n    const request = {};\n    request.timeMin = start;\n    request.timeMax = end;\n    request.timeZone = \"America/New_York\"; // Create calendars object\n\n    let cals = [];\n\n    for (let i = 0; i < props.selectedCalendars.length; i++) {\n      let calObj = {};\n      calObj.id = props.selectedCalendars[i];\n      cals.push(calObj);\n    }\n\n    request.items = cals;\n    let num_days = '';\n\n    if (props.endDate === null) {\n      console.log(\"we here\");\n      let num_days = props.startDate.getDate() - props.startDate.getDate();\n    } else {\n      let num_days = props.endDate.getDate() - props.startDate.getDate();\n    } // for each day in between input dates, add event\n    // day1 8am 830am, 8pm to day2 8am\n\n\n    for (let x = 0; x < num_days; x++) {\n      let day = props.startDate.getDate();\n      let curDateDay = day + x;\n      let inputDate = props.startDate; //appendPre(curDateDay)\n\n      let morningBusyStart = new Date();\n      morningBusyStart.setDate(curDateDay);\n      morningBusyStart.setHours(8);\n      morningBusyStart.setMinutes(0);\n      morningBusyStart.setSeconds(0);\n      morningBusyStart.setFullYear(inputDate.getFullYear());\n      let morningBusyEnd = new Date();\n      morningBusyEnd.setDate(curDateDay);\n      morningBusyEnd.setHours(8);\n      morningBusyEnd.setMinutes(30);\n      morningBusyEnd.setSeconds(0);\n      morningBusyEnd.setFullYear(inputDate.getFullYear());\n      let nightBusyStart = new Date();\n      nightBusyStart.setDate(curDateDay);\n      nightBusyStart.setHours(20);\n      nightBusyStart.setMinutes(0);\n      nightBusyStart.setSeconds(0);\n      nightBusyStart.setFullYear(inputDate.getFullYear());\n      let nightBusyEnd = new Date();\n      nightBusyEnd.setDate(curDateDay);\n      nightBusyEnd.setHours(20);\n      nightBusyEnd.setMinutes(30);\n      nightBusyEnd.setSeconds(0);\n      nightBusyEnd.setFullYear(inputDate.getFullYear()); // prettyStartTime = morningBusyStart.toLocaleString('en-US', { timeZone: 'EST' });\n      // prettyEndTime = morningBusyEnd.toLocaleString('en-US', { timeZone: 'EST' });\n\n      var morningBusyStart_formatted = {\n        date: morningBusyStart\n      };\n      var morningBusyEnd_formatted = {\n        date: morningBusyEnd\n      };\n      var nightBusyStart_formatted = {\n        date: nightBusyStart\n      };\n      var nightBusyEnd_formatted = {\n        date: nightBusyEnd\n      };\n      allStartTimes.push(morningBusyStart_formatted);\n      allEndTimes.push(morningBusyEnd_formatted);\n      allStartTimes.push(nightBusyStart_formatted);\n      allEndTimes.push(nightBusyEnd_formatted);\n      let timecombo = [morningBusyStart, morningBusyEnd];\n      busyBlocksToAdd.push(timecombo);\n    }\n\n    return gapi.client.calendar.freebusy.query(request).then(function (response) {\n      for (let k = 0; k < props.selectedCalendars.length; k++) {\n        var curCal = props.selectedCalendars[k];\n        var busyTimes = response.result.calendars[curCal].busy;\n\n        for (let i = 0; i < busyTimes.length; i++) {\n          var busyBlock = busyTimes[i];\n          console.log(\"Busy block for \" + curCal, busyBlock);\n          var startTime = busyBlock.start;\n          var endTime = busyBlock.end;\n          var data = {\n            date: startTime\n          };\n          var data2 = {\n            date: endTime\n          };\n          allStartTimes.push(data);\n          allEndTimes.push(data2);\n        }\n      }\n\n      consolidateAllBusyTimes();\n    }, function (err) {\n      console.error(\"Execute error\", err);\n    });\n  };\n\n  const consolidateAllBusyTimes = () => {\n    allStartTimes.sort(function (a, b) {\n      var c = new Date(a.date);\n      var d = new Date(b.date);\n      return c - d;\n    }); //    appendPre(\"- - - - - - - Sorting end times\")\n\n    allEndTimes.sort(function (a, b) {\n      var c = new Date(a.date);\n      var d = new Date(b.date);\n      return c - d;\n    });\n    let startTimes = allStartTimes;\n    let endTimes = allEndTimes;\n    var masterArray = [];\n\n    for (let x = 0; x < startTimes.length; x++) {\n      let startTime = startTimes[x].date;\n      let endTime = endTimes[x].date;\n      let timeStartDateFormat = new Date(startTime);\n      let timeEndDateFormat = new Date(endTime);\n      let prettyStartTime = timeStartDateFormat.toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n      let prettyEndTime = timeEndDateFormat.toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n      let timecombo = [timeStartDateFormat, timeEndDateFormat];\n      masterArray.push(timecombo);\n    }\n\n    for (let k = 0; k < masterArray.length; k++) {\n      let data = masterArray[k];\n      let start = data[0];\n      let end = data[1];\n      let start2 = new Date(start).toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n      let end2 = new Date(end).toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n      console.log(k + \" Start: \" + start2 + \" || End: \" + end2);\n    } // STEP 1 merge all same start times\n\n\n    var newtimes = [];\n\n    for (let x = 0; x < masterArray.length; x++) {\n      var data = masterArray[x];\n      var curstart = data[0].getTime();\n      var curend = data[1].getTime();\n      var latestend = curend;\n\n      for (let i = 0; i < masterArray.length; i++) {\n        var data2 = masterArray[i];\n        var start2 = data2[0].getTime();\n        var end2 = data2[1].getTime();\n\n        if (curstart == start2) {\n          if (latestend < end2) {\n            latestend = end2;\n          }\n        }\n      }\n\n      let newtime = [curstart, latestend];\n      var shouldWeAddIt = true;\n\n      for (let k = 0; k < newtimes.length; k++) {\n        let data = newtimes[k];\n        let start = data[0];\n        let end = data[1];\n\n        if (start == curstart) {\n          if (end == latestend) {\n            shouldWeAddIt = false;\n          }\n        } else {}\n      }\n\n      if (shouldWeAddIt) {\n        newtimes.push(newtime);\n      }\n    } // print OG array\n    //\n    //  appendPre(\"Merging same start times\");\n\n\n    for (let k = 0; k < newtimes.length; k++) {\n      let data = newtimes[k];\n      let start = data[0];\n      let end = data[1];\n      start2 = new Date(start).toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n      end2 = new Date(end).toLocaleString('en-US', {\n        timeZone: 'EST'\n      }); //appendPre(k + \" Start: \" + start2 + \" || End: \" + end2);\n    } // STEP 2  Remove times within larger time blocks\n\n\n    var newertimes = [];\n\n    for (let x = 0; x < newtimes.length; x++) {\n      var data = newtimes[x];\n      var curstart = data[0];\n      var curend = data[1];\n      var latestend = curend;\n      var shouldAdd = true;\n\n      for (let i = 0; i < newtimes.length; i++) {\n        var data2 = newtimes[i];\n        var start2 = data2[0];\n        var end2 = data2[1];\n\n        if (start2 < curstart) {\n          if (end2 > curend) {\n            shouldAdd = false;\n          }\n        }\n      }\n\n      let newtime = [curstart, curend];\n\n      if (shouldAdd) {\n        newertimes.push(newtime);\n      }\n    } // STEP 2 printing results\n    //  appendPre(\"TIMES WITH OVERLAPPING BLOCKS REMOVED: \" + newertimes);\n\n\n    for (let k = 0; k < newertimes.length; k++) {\n      data = newertimes[k];\n      let start = data[0];\n      let end = data[1];\n      let start2 = new Date(start).toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n      let end2 = new Date(end).toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n    } // STEP  3 FINAL STEP - consolidate back to back events\n\n\n    var newesttimes = [];\n    var removedtimes = [];\n\n    for (let x = 0; x < newertimes.length; x++) {\n      var data = newertimes[x];\n      var curstart = data[0];\n      var curend = data[1];\n\n      for (let i = 0; i < newertimes.length; i++) {\n        var data2 = newertimes[i];\n        var start2 = data2[0];\n        var end2 = data2[1];\n\n        if (curend > start2) {\n          if (curend < end2) {\n            let newtime = [curstart, end2];\n            newesttimes.push(newtime);\n            removedtimes.push([curstart, curend]);\n            removedtimes.push([start2, end2]);\n          }\n        }\n      }\n    } // STEP 3 printing results\n\n\n    for (let k = 0; k < newesttimes.length; k++) {\n      data = newesttimes[k];\n      let start = data[0];\n      let end = data[1];\n      let start2 = new Date(start).toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n      let end2 = new Date(end).toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n    } // more printing results\n\n\n    for (let k = 0; k < removedtimes.length; k++) {\n      data = removedtimes[k];\n      let start = data[0];\n      let end = data[1];\n      let start2 = new Date(start).toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n      let end2 = new Date(end).toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n    } // Adding consolidated times together, finishing up etc\n\n\n    var finaltimes = [];\n\n    for (let k = 0; k < newertimes.length; k++) {\n      data = newertimes[k];\n      let start = data[0];\n      let end = data[1];\n      var shouldWeAddIt = true;\n\n      for (let x = 0; x < removedtimes.length; x++) {\n        let data2 = removedtimes[x];\n        let start2 = data2[0];\n        let end2 = data2[1];\n\n        if (start2 == start) {\n          if (end2 == end) {\n            shouldWeAddIt = false;\n          }\n        }\n      }\n\n      if (shouldWeAddIt == true) {\n        finaltimes.push(data);\n      }\n    }\n\n    for (let k = 0; k < finaltimes.length; k++) {\n      data = finaltimes[k];\n      let start = data[0];\n      let end = data[1];\n      let start2 = new Date(start).toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n      let end2 = new Date(end).toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n    }\n\n    for (let k = 0; k < newesttimes.length; k++) {\n      let data = newesttimes[k];\n      finaltimes.push(data);\n    }\n\n    for (let k = 0; k < finaltimes.length; k++) {\n      data = finaltimes[k];\n      let start = data[0];\n      let end = data[1];\n      let start2 = new Date(start).toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n      let end2 = new Date(end).toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n    }\n\n    var allstarttimes3 = [];\n    var allendtimes3 = [];\n\n    for (let k = 0; k < finaltimes.length; k++) {\n      data = finaltimes[k];\n      let start = data[0];\n      let end = data[1];\n      allstarttimes3.push(start);\n      allendtimes3.push(end);\n    }\n\n    allstarttimes3.sort(function (a, b) {\n      return a - b;\n    });\n    allendtimes3.sort(function (a, b) {\n      return a - b;\n    });\n    var finalmasterArray = [];\n\n    for (let x = 0; x < allstarttimes3.length; x++) {\n      let startTime = allstarttimes3[x];\n      let endTime = allendtimes3[x];\n      let timeStartDateFormat = new Date(startTime);\n      let timeEndDateFormat = new Date(endTime);\n      let prettyStartTime = timeStartDateFormat.toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n      let prettyEndTime = timeEndDateFormat.toLocaleString('en-US', {\n        timeZone: 'EST'\n      });\n      let timecombo = [timeStartDateFormat, timeEndDateFormat];\n      finalmasterArray.push(timecombo);\n    }\n\n    printPrettyTimeslots(allstarttimes3, allendtimes3, finalmasterArray);\n  };\n\n  function printPrettyTimeslots(allstarttimes3, allendtimes3, finalmasterArray) {\n    var awesomeArray = [];\n    let diff = '';\n    let beginfreeslot = '';\n    let endfreeslot = '';\n    let prettyStart = '';\n    let prettyEnd = '';\n    let prettyStartTime = '';\n    let prettyEndTime = '';\n    let splitStart = '';\n    let splitEnd = '';\n    let ogStart = '';\n    let ogEnd = '';\n\n    for (let x = 0; x < finalmasterArray.length - 1; x++) {\n      var times = finalmasterArray[x];\n      var curstart = times[0];\n      var curend = times[1];\n      var times = finalmasterArray[x + 1];\n      var nextstart = times[0];\n      var nextend = times[1];\n\n      if (x == 0) {\n        // First element, subtract from 8am\n        let eightAm = new Date(curstart);\n        eightAm.setHours(8);\n        eightAm.setMinutes(0);\n        eightAm.setSeconds(0);\n        eightAm = eightAm.getTime();\n        eightAm = new Date(eightAm);\n        let diff = curstart - eightAm;\n\n        if (diff > 0 && diff < 36000000) {\n          let beginfreeslot = eightAm;\n          eightAm = eightAm.getTime();\n          let endfreeslot = eightAm + diff;\n          let prettyStart = new Date(beginfreeslot);\n          let prettyEnd = new Date(endfreeslot);\n          let prettyStartTime = prettyStart.toLocaleString('en-US', {\n            timeZone: 'EST'\n          });\n          let prettyEndTime = prettyEnd.toLocaleString('en-US', {\n            timeZone: 'EST'\n          });\n          let splitStart = prettyStartTime.split(\" \");\n          let splitEnd = prettyEndTime.split(\" \");\n          let ogStart = splitStart[1];\n          let ogEnd = splitEnd[1];\n          awesomeArray.push([prettyStart, prettyEnd]);\n        }\n\n        diff = nextstart - curend;\n\n        if (diff > 0 && diff < 36000000) {\n          let beginfreeslot = curend;\n          let endfreeslot = nextstart + diff;\n          let prettyStart = new Date(beginfreeslot);\n          let prettyEnd = new Date(endfreeslot);\n          let prettyStartTime = prettyStart.toLocaleString('en-US', {\n            timeZone: 'EST'\n          });\n          let prettyEndTime = prettyEnd.toLocaleString('en-US', {\n            timeZone: 'EST'\n          });\n          let splitStart = prettyStartTime.split(\" \");\n          let splitEnd = prettyEndTime.split(\" \");\n          let ogStart = splitStart[1];\n          let ogEnd = splitEnd[1];\n          awesomeArray.push([prettyStart, prettyEnd]);\n        }\n      } else if (x == finalmasterArray.length - 2) {\n        diff = nextstart - curend;\n\n        if (diff > 0 && diff < 36000000) {\n          let beginfreeslot = curend;\n          let endfreeslot = nextstart + diff;\n          let prettyStart = new Date(beginfreeslot);\n          let prettyEnd = new Date(endfreeslot);\n          let prettyStartTime = prettyStart.toLocaleString('en-US', {\n            timeZone: 'EST'\n          });\n          let prettyEndTime = prettyEnd.toLocaleString('en-US', {\n            timeZone: 'EST'\n          });\n          let splitStart = prettyStartTime.split(\" \");\n          let splitEnd = prettyEndTime.split(\" \");\n          let ogStart = splitStart[1];\n          let ogEnd = splitEnd[1];\n          awesomeArray.push([prettyStart, prettyEnd]);\n        } // Proceed to add final end of day -> 8 pm time slot\n\n\n        let sevenPm = new Date(curend);\n        sevenPm.setHours(8 + 12);\n        sevenPm.setMinutes(0);\n        sevenPm.setSeconds(0);\n        nextend = nextend.getTime();\n        diff = sevenPm - nextend;\n\n        if (diff > 0 && diff < 36000000) {\n          // nextend = nextend.getTime()\n          beginfreeslot = nextend;\n          endfreeslot = nextend + diff;\n          prettyStart = new Date(beginfreeslot);\n          prettyEnd = new Date(endfreeslot);\n          prettyStartTime = prettyStart.toLocaleString('en-US', {\n            timeZone: 'EST'\n          });\n          prettyEndTime = prettyEnd.toLocaleString('en-US', {\n            timeZone: 'EST'\n          });\n          splitStart = prettyStartTime.split(\" \");\n          splitEnd = prettyEndTime.split(\" \");\n          ogStart = splitStart[1];\n          ogEnd = splitEnd[1];\n          awesomeArray.push([prettyStart, prettyEnd]);\n        }\n      } else {\n        let diff = nextstart - curend;\n\n        if (diff > 0 && diff < 36000000) {\n          beginfreeslot = curend;\n          endfreeslot = nextstart + diff;\n          prettyStart = new Date(beginfreeslot);\n          prettyEnd = new Date(endfreeslot);\n          prettyStartTime = prettyStart.toLocaleString('en-US', {\n            timeZone: 'EST'\n          });\n          prettyEndTime = prettyEnd.toLocaleString('en-US', {\n            timeZone: 'EST'\n          });\n          splitStart = prettyStartTime.split(\" \");\n          splitEnd = prettyEndTime.split(\" \");\n          ogStart = splitStart[1];\n          ogEnd = splitEnd[1];\n          awesomeArray.push([prettyStart, prettyEnd]);\n        }\n      }\n    } // Remove old elements in list\n\n\n    console.log(\"awesome array\");\n    console.log(awesomeArray);\n    var finalArr = [];\n\n    for (let x = 0; x < awesomeArray.length; x++) {\n      var times = awesomeArray[x];\n      var curstart = times[0];\n      curstart = new Date(curstart.setHours(curstart.getHours() + 1));\n      var curend = times[1];\n      curend = new Date(curend.setHours(curend.getHours() + 1));\n      var comb = [curstart, curend];\n      finalArr.push(comb); // let curstartString = String(curstart);\n      // let curendString = String(curend);\n      // let startstring = curstart.toLocaleString('en-US', { timeZone: 'EST',  timeStyle: \"short\", dateStyle: \"short\" });\n      // let endstring = curend.toLocaleString('en-US', { timeZone: 'EST',  timeStyle: \"short\", dateStyle: \"short\" });\n      // let startstringsplit = curstartString.split(\" \");\n      // let pretty_dayofweek = startstringsplit[0]\n      // let month = curstart.getMonth() + 1;\n      // let day = curstart.getDate();\n      // let startstringsplit2 = startstring.split(\" \");\n      // let pretty_starttime = startstringsplit2[1] + \" \" + startstringsplit2[2];\n      // let endstringsplit2 = endstring.split(\" \");\n      // let pretty_endtime = endstringsplit2[1] + \" \" + endstringsplit2[2];\n      // let prettystring = (pretty_dayofweek + \" \" + month + \"/\" + day + \": \" + pretty_starttime + \" to \" + pretty_endtime);\n      // console.log(\"prettty\" + prettystring);\n    }\n\n    props.setOutputReady(true);\n    freeTimes = finalArr;\n  }\n\n  console.log(props.selectedCalendars);\n  console.log(props.startDate);\n  console.log(props.endDate);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"todo-container\",\n    children: [props.outputReady ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"hi there\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 625,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn-upload\",\n      onClick: fetchFreeTimes,\n      children: \" Fetch free times \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 630,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 633,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 634,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 623,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CalendarOutput, \"DJ6JTRgv6EuA/Jm8jQ8tceQuON4=\");\n\n_c = CalendarOutput;\nexport default CalendarOutput;\n\nvar _c;\n\n$RefreshReg$(_c, \"CalendarOutput\");","map":{"version":3,"names":["React","Calendar","format","useState","useEffect","CalendarOutput","props","freeTimes","setFreeTimes","allStartTimes","allEndTimes","busyBlocksToAdd","fetchFreeTimes","start","Date","startDate","setHours","setMinutes","setSeconds","toISOString","end","endDate","piza","setEndDate","console","log","request","timeMin","timeMax","timeZone","cals","i","selectedCalendars","length","calObj","id","push","items","num_days","getDate","x","day","curDateDay","inputDate","morningBusyStart","setDate","setFullYear","getFullYear","morningBusyEnd","nightBusyStart","nightBusyEnd","morningBusyStart_formatted","date","morningBusyEnd_formatted","nightBusyStart_formatted","nightBusyEnd_formatted","timecombo","gapi","client","calendar","freebusy","query","then","response","k","curCal","busyTimes","result","calendars","busy","busyBlock","startTime","endTime","data","data2","consolidateAllBusyTimes","err","error","sort","a","b","c","d","startTimes","endTimes","masterArray","timeStartDateFormat","timeEndDateFormat","prettyStartTime","toLocaleString","prettyEndTime","start2","end2","newtimes","curstart","getTime","curend","latestend","newtime","shouldWeAddIt","newertimes","shouldAdd","newesttimes","removedtimes","finaltimes","allstarttimes3","allendtimes3","finalmasterArray","printPrettyTimeslots","awesomeArray","diff","beginfreeslot","endfreeslot","prettyStart","prettyEnd","splitStart","splitEnd","ogStart","ogEnd","times","nextstart","nextend","eightAm","split","sevenPm","finalArr","getHours","comb","setOutputReady","outputReady"],"sources":["/Users/tucker/Documents/GitHub/tmb5cg.github.io/src/components/FreeTimeFinder/CalendarOutput.js"],"sourcesContent":["import React from 'react';\nimport Calendar from './Calendar.js'\nimport format from \"date-fns/format\";\nimport { useState, useEffect} from 'react'\n\n\nconst CalendarOutput = (props) => {\n\n  const [freeTimes, setFreeTimes] = useState()\n  // const [outputReady, setOutputReady] = useState(false)\n\n    const allStartTimes = [];\n    const allEndTimes = [];\n    const busyBlocksToAdd = [];\n\n    const fetchFreeTimes = () => {\n      // Check if endDate is set, if not set to startDate\n\n        // Format start date to 8am\n        var start = new Date(props.startDate)\n        start.setHours(8)\n        start.setMinutes(0)\n        start.setSeconds(0)\n        start = start.toISOString();\n\n        // Format end date to 8 pm\n        let end = ''\n        if (props.endDate === null) {\n          end = new Date(props.startDate)\n          const piza = new Date(props.startDate)\n          props.setEndDate(piza)\n          end = new Date(piza)\n        } else {\n          end = new Date(props.endDate)\n        }\n        end.setHours(20)\n        end.setMinutes(0)\n        end.setSeconds(0)\n        end = end.toISOString();\n        \n        console.log(start)\n        console.log(end)\n\n        // Build request body\n        const request = {}\n        request.timeMin = start;\n        request.timeMax = end;\n        request.timeZone = \"America/New_York\";\n\n        // Create calendars object\n        let cals = []\n        for (let i=0; i<props.selectedCalendars.length; i++){\n            let calObj = {}\n            calObj.id = props.selectedCalendars[i]\n            cals.push(calObj)\n        }\n\n        request.items = cals\n\n        let num_days = ''\n        if (props.endDate === null) {\n          console.log(\"we here\")\n          let num_days = props.startDate.getDate() - props.startDate.getDate()\n        } else {\n          let num_days = props.endDate.getDate() - props.startDate.getDate()\n        }\n\n        // for each day in between input dates, add event\n        // day1 8am 830am, 8pm to day2 8am\n        for (let x=0; x < num_days; x++){\n            let day = props.startDate.getDate()\n\n            let curDateDay = day + x\n            let inputDate = props.startDate\n\n            //appendPre(curDateDay)\n            let morningBusyStart = new Date()\n            morningBusyStart.setDate(curDateDay)\n            morningBusyStart.setHours(8)\n            morningBusyStart.setMinutes(0)\n            morningBusyStart.setSeconds(0)\n            morningBusyStart.setFullYear(inputDate.getFullYear())\n\n            let morningBusyEnd = new Date()\n            morningBusyEnd.setDate(curDateDay)\n            morningBusyEnd.setHours(8)\n            morningBusyEnd.setMinutes(30)\n            morningBusyEnd.setSeconds(0)\n            morningBusyEnd.setFullYear(inputDate.getFullYear())\n\n\n            let nightBusyStart = new Date()\n            nightBusyStart.setDate(curDateDay)\n            nightBusyStart.setHours(20)\n            nightBusyStart.setMinutes(0)\n            nightBusyStart.setSeconds(0)\n            nightBusyStart.setFullYear(inputDate.getFullYear())\n\n            let nightBusyEnd = new Date()\n            nightBusyEnd.setDate(curDateDay)\n            nightBusyEnd.setHours(20)\n            nightBusyEnd.setMinutes(30)\n            nightBusyEnd.setSeconds(0)\n            nightBusyEnd.setFullYear(inputDate.getFullYear())\n\n            // prettyStartTime = morningBusyStart.toLocaleString('en-US', { timeZone: 'EST' });\n            // prettyEndTime = morningBusyEnd.toLocaleString('en-US', { timeZone: 'EST' });\n            var morningBusyStart_formatted = {date: morningBusyStart};\n            var morningBusyEnd_formatted = {date: morningBusyEnd};\n\n            var nightBusyStart_formatted = {date: nightBusyStart};\n            var nightBusyEnd_formatted = {date: nightBusyEnd};\n\n            allStartTimes.push(morningBusyStart_formatted);\n            allEndTimes.push(morningBusyEnd_formatted);\n\n            allStartTimes.push(nightBusyStart_formatted);\n            allEndTimes.push(nightBusyEnd_formatted);\n\n            let timecombo = [morningBusyStart, morningBusyEnd];\n            busyBlocksToAdd.push(timecombo);\n\n        }\n        return gapi.client.calendar.freebusy.query(request)\n      \n              .then(function(response) {\n                for (let k = 0; k < props.selectedCalendars.length; k++) {\n                    var curCal = props.selectedCalendars[k];\n                    var busyTimes = response.result.calendars[curCal].busy;\n        \n                    for (let i = 0; i < busyTimes.length; i++){\n                      var busyBlock = busyTimes[i];\n                      console.log(\"Busy block for \" + curCal, busyBlock);\n        \n                      var startTime = busyBlock.start;\n                      var endTime = busyBlock.end;\n        \n                      var data = {date: startTime};\n                      var data2 = {date: endTime};\n        \n                      allStartTimes.push(data);\n                      allEndTimes.push(data2);\n        \n                    }\n                  }\n                consolidateAllBusyTimes();\n              },\n              function(err) { console.error(\"Execute error\", err); });\n      }\n\n\n      const consolidateAllBusyTimes = () => {\n        allStartTimes.sort(function(a, b) {\n          var c = new Date(a.date);\n          var d = new Date(b.date);\n          return c-d;\n      });\n  \n      //    appendPre(\"- - - - - - - Sorting end times\")\n  \n      allEndTimes.sort(function(a, b) {\n        var c = new Date(a.date);\n        var d = new Date(b.date);\n        return c-d;\n      });\n  \n        let startTimes = allStartTimes;\n        let endTimes = allEndTimes;\n\n      var masterArray = [];\n        for (let x = 0; x < startTimes.length; x++){\n          let startTime = startTimes[x].date;\n          let endTime = endTimes[x].date;\n  \n          let timeStartDateFormat = new Date(startTime);\n          let timeEndDateFormat = new Date(endTime);\n  \n          let prettyStartTime = timeStartDateFormat.toLocaleString('en-US', { timeZone: 'EST' });\n          let prettyEndTime = timeEndDateFormat.toLocaleString('en-US', { timeZone: 'EST' });\n  \n          let timecombo = [timeStartDateFormat, timeEndDateFormat];\n          masterArray.push(timecombo);\n        }\n\n        for (let k=0; k<masterArray.length;k++){\n          let data = masterArray[k];\n          let start = data[0];\n          let end = data[1];\n  \n          let start2 = new Date(start).toLocaleString('en-US', { timeZone: 'EST' });\n          let end2 = new Date(end).toLocaleString('en-US', { timeZone: 'EST' });\n  \n          console.log(k + \" Start: \" + start2 + \" || End: \" + end2);\n        }\n\n        // STEP 1 merge all same start times\n        var newtimes = [];\n        for (let x = 0; x < masterArray.length; x++){\n              var data = masterArray[x];\n  \n              var curstart = data[0].getTime();\n              var curend = data[1].getTime();\n  \n              var latestend = curend;\n  \n              for (let i = 0; i < masterArray.length; i++){\n                var data2 = masterArray[i];\n  \n                var start2 = data2[0].getTime();\n                var end2 = data2[1].getTime();\n                if (curstart == start2) {\n                      if (latestend < end2) {\n                        latestend = end2;\n                      }\n                }\n              }\n  \n              let newtime = [curstart, latestend];\n  \n              var shouldWeAddIt = true;\n              for (let k=0; k<newtimes.length;k++){\n                let data = newtimes[k];\n                let start = data[0];\n                let end = data[1];\n  \n                if (start == curstart){\n                  if (end == latestend) {\n                    shouldWeAddIt = false;\n                  }\n                } else {\n                }\n              }\n  \n              if (shouldWeAddIt){\n                newtimes.push(newtime);\n              }\n          }\n  \n          // print OG array\n        //\n      //  appendPre(\"Merging same start times\");\n          for (let k=0; k<newtimes.length;k++){\n            let data = newtimes[k];\n            let start = data[0];\n            let end = data[1];\n  \n            start2 = new Date(start).toLocaleString('en-US', { timeZone: 'EST' });\n            end2 = new Date(end).toLocaleString('en-US', { timeZone: 'EST' });\n  \n            //appendPre(k + \" Start: \" + start2 + \" || End: \" + end2);\n          }\n  \n        // STEP 2  Remove times within larger time blocks\n        var newertimes = [];\n        for (let x = 0; x < newtimes.length; x++){\n              var data = newtimes[x];\n  \n              var curstart = data[0]\n              var curend = data[1]\n              var latestend = curend;\n  \n              var shouldAdd = true;\n              for (let i = 0; i < newtimes.length; i++){\n                var data2 = newtimes[i];\n                var start2 = data2[0]\n                var end2 = data2[1]\n  \n                if (start2 < curstart) {\n                  if (end2 > curend){\n                    shouldAdd = false;\n                  }\n                }\n  \n              }\n  \n              let newtime = [curstart, curend];\n  \n              if (shouldAdd) {\n                newertimes.push(newtime);\n              }\n          }\n  \n  \n              // STEP 2 printing results\n            //  appendPre(\"TIMES WITH OVERLAPPING BLOCKS REMOVED: \" + newertimes);\n              for (let k=0; k<newertimes.length;k++){\n                data = newertimes[k];\n                let start = data[0];\n                let end = data[1];\n  \n                let start2 = new Date(start).toLocaleString('en-US', { timeZone: 'EST' });\n                let end2 = new Date(end).toLocaleString('en-US', { timeZone: 'EST' });\n  \n              }\n  \n          // STEP  3 FINAL STEP - consolidate back to back events\n          var newesttimes = [];\n          var removedtimes = [];\n          for (let x = 0; x < newertimes.length; x++){\n                var data = newertimes[x];\n  \n                var curstart = data[0];\n                var curend = data[1];\n  \n                for (let i = 0; i < newertimes.length; i++){\n                  var data2 = newertimes[i];\n  \n                  var start2 = data2[0];\n                  var end2 = data2[1];\n  \n                  if (curend > start2){\n                    if (curend < end2) {\n                      let newtime = [curstart, end2];\n                      newesttimes.push(newtime);\n                      removedtimes.push([curstart,curend]);\n                      removedtimes.push([start2, end2]);\n                    }\n                  }\n            }\n          }\n  \n              // STEP 3 printing results\n              for (let k=0; k<newesttimes.length; k++){\n                data = newesttimes[k];\n                let start = data[0];\n                let end = data[1];\n  \n                let start2 = new Date(start).toLocaleString('en-US', { timeZone: 'EST' });\n                let end2 = new Date(end).toLocaleString('en-US', { timeZone: 'EST' });\n  \n              }\n  \n              // more printing results\n              for (let k=0; k<removedtimes.length; k++){\n                data = removedtimes[k];\n                let start = data[0];\n                let end = data[1];\n  \n                let start2 = new Date(start).toLocaleString('en-US', { timeZone: 'EST' });\n                let end2 = new Date(end).toLocaleString('en-US', { timeZone: 'EST' });\n              }\n  \n            // Adding consolidated times together, finishing up etc\n            var finaltimes = [];\n            for (let k=0; k < newertimes.length; k++){\n              data = newertimes[k];\n              let start = data[0];\n              let end = data[1];\n  \n              var shouldWeAddIt = true;\n  \n              for (let x=0; x < removedtimes.length; x++){\n                    let data2 = removedtimes[x];\n                    let start2 = data2[0];\n                    let end2 = data2[1];\n  \n                    if (start2 == start) {\n                      if (end2 == end) {\n                        shouldWeAddIt = false;\n                      }\n                      }\n                }\n  \n              if (shouldWeAddIt == true) {\n                finaltimes.push(data);\n              }\n           }\n  \n         for (let k=0; k<finaltimes.length; k++){\n           data = finaltimes[k];\n           let start = data[0];\n           let end = data[1];\n  \n           let start2 = new Date(start).toLocaleString('en-US', { timeZone: 'EST' });\n           let end2 = new Date(end).toLocaleString('en-US', { timeZone: 'EST' });\n  \n         }\n  \n         for (let k=0; k<newesttimes.length; k++){\n           let data = newesttimes[k];\n           finaltimes.push(data);\n         }\n  \n         for (let k=0; k<finaltimes.length; k++){\n           data = finaltimes[k];\n           let start = data[0];\n           let end = data[1];\n  \n           let start2 = new Date(start).toLocaleString('en-US', { timeZone: 'EST' });\n           let end2 = new Date(end).toLocaleString('en-US', { timeZone: 'EST' });\n  \n         }\n  \n         var allstarttimes3 = [];\n         var allendtimes3 = [];\n         for (let k=0; k<finaltimes.length; k++){\n           data = finaltimes[k];\n           let start = data[0];\n           let end = data[1];\n  \n           allstarttimes3.push(start);\n           allendtimes3.push(end);\n         }\n  \n        allstarttimes3.sort(function(a, b){return a-b});\n        allendtimes3.sort(function(a, b){return a-b});\n  \n        var finalmasterArray = [];\n  \n          for (let x = 0; x < allstarttimes3.length; x++){\n            let startTime = allstarttimes3[x];\n            let endTime = allendtimes3[x];\n  \n            let timeStartDateFormat = new Date(startTime);\n            let timeEndDateFormat = new Date(endTime);\n  \n            let prettyStartTime = timeStartDateFormat.toLocaleString('en-US', { timeZone: 'EST' });\n            let prettyEndTime = timeEndDateFormat.toLocaleString('en-US', { timeZone: 'EST' });\n  \n            let timecombo = [timeStartDateFormat, timeEndDateFormat];\n            finalmasterArray.push(timecombo);\n          }\n  \n          printPrettyTimeslots(allstarttimes3, allendtimes3, finalmasterArray);\n  \n    }\n\n    function printPrettyTimeslots(allstarttimes3, allendtimes3, finalmasterArray){\n        var awesomeArray = [];\n        let diff = ''\n        let beginfreeslot = ''\n        let endfreeslot = ''\n        let prettyStart = ''\n        let prettyEnd = ''\n        let prettyStartTime = ''\n        let prettyEndTime = ''\n        let splitStart = ''\n        let splitEnd = ''\n        let ogStart = ''\n        let ogEnd = ''\n        for (let x = 0; x < finalmasterArray.length-1; x++){\n              var times = finalmasterArray[x];\n              var curstart = times[0];\n              var curend = times[1];\n    \n              var times = finalmasterArray[x+1];\n    \n              var nextstart = times[0];\n              var nextend = times[1];\n    \n    \n              if (x==0) {\n                // First element, subtract from 8am\n                let eightAm = new Date(curstart);\n    \n                eightAm.setHours(8);\n                eightAm.setMinutes(0);\n                eightAm.setSeconds(0);\n    \n                eightAm = eightAm.getTime();\n                eightAm = new Date(eightAm);\n    \n                let diff = curstart - eightAm;\n    \n                if ((diff > 0) && (diff < 36000000)) {\n                  let beginfreeslot = eightAm;\n                  eightAm = eightAm.getTime();\n                  let endfreeslot = eightAm + diff;\n                  let prettyStart = new Date(beginfreeslot);\n                  let prettyEnd = new Date(endfreeslot);\n    \n                  let prettyStartTime = prettyStart.toLocaleString('en-US', { timeZone: 'EST' });\n                  let prettyEndTime = prettyEnd.toLocaleString('en-US', { timeZone: 'EST' });\n    \n                  let splitStart = prettyStartTime.split(\" \");\n                  let splitEnd = prettyEndTime.split(\" \");\n    \n                  let ogStart = splitStart[1];\n                  let ogEnd = splitEnd[1];\n                  awesomeArray.push([prettyStart, prettyEnd]);\n                }\n    \n                diff = nextstart - curend;\n    \n                if ((diff > 0) && (diff < 36000000)) {\n                  let beginfreeslot = curend;\n                  let endfreeslot = nextstart + diff;\n                  let prettyStart = new Date(beginfreeslot);\n                  let prettyEnd = new Date(endfreeslot);\n    \n                  let prettyStartTime = prettyStart.toLocaleString('en-US', { timeZone: 'EST' });\n                  let prettyEndTime = prettyEnd.toLocaleString('en-US', { timeZone: 'EST' });\n    \n                  let splitStart = prettyStartTime.split(\" \");\n                  let splitEnd = prettyEndTime.split(\" \");\n    \n                  let ogStart = splitStart[1];\n                  let ogEnd = splitEnd[1];\n                  awesomeArray.push([prettyStart, prettyEnd]);\n                }\n    \n              }\n    \n              else if (x == finalmasterArray.length-2){\n                diff = nextstart - curend;\n    \n                  if ((diff > 0) && (diff < 36000000)) {\n                  let beginfreeslot = curend;\n                  let endfreeslot = nextstart + diff;\n                  let prettyStart = new Date(beginfreeslot);\n                  let prettyEnd = new Date(endfreeslot);\n    \n                  let prettyStartTime = prettyStart.toLocaleString('en-US', { timeZone: 'EST' });\n                  let prettyEndTime = prettyEnd.toLocaleString('en-US', { timeZone: 'EST' });\n    \n                  let splitStart = prettyStartTime.split(\" \");\n                  let splitEnd = prettyEndTime.split(\" \");\n    \n                  let ogStart = splitStart[1];\n                  let ogEnd = splitEnd[1];\n                  awesomeArray.push([prettyStart, prettyEnd]);\n                }\n    \n                // Proceed to add final end of day -> 8 pm time slot\n                let sevenPm = new Date(curend);\n    \n                sevenPm.setHours(8+12);\n                sevenPm.setMinutes(0);\n                sevenPm.setSeconds(0);\n    \n                nextend = nextend.getTime()\n    \n                diff = sevenPm - nextend;\n    \n                if ((diff > 0) && (diff < 36000000)) {\n                  // nextend = nextend.getTime()\n                  beginfreeslot = nextend;\n                  endfreeslot = nextend + diff;\n    \n                  prettyStart = new Date(beginfreeslot);\n                  prettyEnd = new Date(endfreeslot);\n    \n                  prettyStartTime = prettyStart.toLocaleString('en-US', { timeZone: 'EST' });\n                  prettyEndTime = prettyEnd.toLocaleString('en-US', { timeZone: 'EST' });\n    \n                  splitStart = prettyStartTime.split(\" \");\n                  splitEnd = prettyEndTime.split(\" \");\n    \n                  ogStart = splitStart[1];\n                  ogEnd = splitEnd[1];\n                  awesomeArray.push([prettyStart, prettyEnd]);\n                }\n    \n    \n              }\n              else {\n                  let diff = nextstart - curend;\n    \n                  if ((diff > 0) && (diff < 36000000)) {\n                    beginfreeslot = curend;\n                    endfreeslot = nextstart + diff;\n                    prettyStart = new Date(beginfreeslot);\n                    prettyEnd = new Date(endfreeslot);\n    \n                    prettyStartTime = prettyStart.toLocaleString('en-US', { timeZone: 'EST' });\n                    prettyEndTime = prettyEnd.toLocaleString('en-US', { timeZone: 'EST' });\n    \n                    splitStart = prettyStartTime.split(\" \");\n                    splitEnd = prettyEndTime.split(\" \");\n    \n                    ogStart = splitStart[1];\n                    ogEnd = splitEnd[1];\n                    awesomeArray.push([prettyStart, prettyEnd]);\n                  }\n                }\n        }\n    \n        // Remove old elements in list\n        console.log(\"awesome array\")\n        console.log(awesomeArray)\n        var finalArr = []\n        for (let x = 0; x < awesomeArray.length; x++){\n          var times = awesomeArray[x];\n          var curstart = times[0];\n          curstart = new Date(curstart.setHours(curstart.getHours() + 1))\n          var curend = times[1];\n          curend = new Date(curend.setHours(curend.getHours() + 1))\n\n          var comb = [curstart, curend]\n          finalArr.push(comb)\n    \n          // let curstartString = String(curstart);\n          // let curendString = String(curend);\n\n          // let startstring = curstart.toLocaleString('en-US', { timeZone: 'EST',  timeStyle: \"short\", dateStyle: \"short\" });\n          // let endstring = curend.toLocaleString('en-US', { timeZone: 'EST',  timeStyle: \"short\", dateStyle: \"short\" });\n    \n          // let startstringsplit = curstartString.split(\" \");\n          // let pretty_dayofweek = startstringsplit[0]\n          // let month = curstart.getMonth() + 1;\n          // let day = curstart.getDate();\n    \n          // let startstringsplit2 = startstring.split(\" \");\n          // let pretty_starttime = startstringsplit2[1] + \" \" + startstringsplit2[2];\n          // let endstringsplit2 = endstring.split(\" \");\n          // let pretty_endtime = endstringsplit2[1] + \" \" + endstringsplit2[2];\n    \n          // let prettystring = (pretty_dayofweek + \" \" + month + \"/\" + day + \": \" + pretty_starttime + \" to \" + pretty_endtime);\n          // console.log(\"prettty\" + prettystring);\n    \n        }\n\n        props.setOutputReady(true)\n        freeTimes = finalArr\n    }\n      \n\n    console.log(props.selectedCalendars)\n    console.log(props.startDate)\n    console.log(props.endDate)\n\n     return (\n    <div className=\"todo-container\">\n          {props.outputReady ? (\n          <div>\n            <h3>hi there</h3>\n          </div>\n      ) : (\n\n        <button className=\"btn-upload\" onClick={fetchFreeTimes}> Fetch free times </button>\n         \n      )}\n    <br />\n    <br />\n\n    </div>\n\n     );\n}\n\nexport default CalendarOutput;"],"mappings":"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"},"metadata":{},"sourceType":"module"}