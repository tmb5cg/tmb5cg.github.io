{"ast":null,"code":"export const refreshTokenSetup = res => {\n  // Timing to renew access token\n  let refreshTiming = (res.tokenObj.expires_in || 3600 - 5 * 60) * 1000;\n\n  const refreshToken = async () => {\n    const newAuthRes = await res.reloadAuthResponse();\n    refreshTiming = (newAuthRes.expires_in || 3600 - 5 * 60) * 1000;\n    console.log('newAuthRes:', newAuthRes); // saveUserToken(newAuthRes.access_token);  <-- save new token\n\n    localStorage.setItem('authToken', newAuthRes.id_token); // Setup the other timer after the first one\n\n    setTimeout(refreshToken, refreshTiming);\n  }; // Setup first refresh timer\n\n\n  setTimeout(refreshToken, refreshTiming);\n};","map":{"version":3,"names":["refreshTokenSetup","res","refreshTiming","tokenObj","expires_in","refreshToken","newAuthRes","reloadAuthResponse","console","log","localStorage","setItem","id_token","setTimeout"],"sources":["/Users/tucker/Documents/GitHub/tmb5cg.github.io/src/components/Google/RefreshToken.js"],"sourcesContent":["export const refreshTokenSetup = (res) => {\n  // Timing to renew access token\n  let refreshTiming = (res.tokenObj.expires_in || 3600 - 5 * 60) * 1000;\n\n  const refreshToken = async () => {\n    const newAuthRes = await res.reloadAuthResponse();\n    refreshTiming = (newAuthRes.expires_in || 3600 - 5 * 60) * 1000;\n    console.log('newAuthRes:', newAuthRes);\n    // saveUserToken(newAuthRes.access_token);  <-- save new token\n    localStorage.setItem('authToken', newAuthRes.id_token);\n\n    // Setup the other timer after the first one\n    setTimeout(refreshToken, refreshTiming);\n  };\n\n  // Setup first refresh timer\n  setTimeout(refreshToken, refreshTiming);\n};"],"mappings":"AAAA,OAAO,MAAMA,iBAAiB,GAAIC,GAAD,IAAS;EACxC;EACA,IAAIC,aAAa,GAAG,CAACD,GAAG,CAACE,QAAJ,CAAaC,UAAb,IAA2B,OAAO,IAAI,EAAvC,IAA6C,IAAjE;;EAEA,MAAMC,YAAY,GAAG,YAAY;IAC/B,MAAMC,UAAU,GAAG,MAAML,GAAG,CAACM,kBAAJ,EAAzB;IACAL,aAAa,GAAG,CAACI,UAAU,CAACF,UAAX,IAAyB,OAAO,IAAI,EAArC,IAA2C,IAA3D;IACAI,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BH,UAA3B,EAH+B,CAI/B;;IACAI,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCL,UAAU,CAACM,QAA7C,EAL+B,CAO/B;;IACAC,UAAU,CAACR,YAAD,EAAeH,aAAf,CAAV;EACD,CATD,CAJwC,CAexC;;;EACAW,UAAU,CAACR,YAAD,EAAeH,aAAf,CAAV;AACD,CAjBM"},"metadata":{},"sourceType":"module"}