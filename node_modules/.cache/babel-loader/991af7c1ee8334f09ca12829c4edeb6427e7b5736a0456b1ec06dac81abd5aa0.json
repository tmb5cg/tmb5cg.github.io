{"ast":null,"code":"var _jsxFileName = \"/Users/tucker/git/tmb5cg.github.io/src/components/FreeTimeFinder/CalendarOutput.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport Calendar from \"./Calendar.js\";\nimport format from \"date-fns/format\";\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CalendarOutput = props => {\n  _s();\n  const [freeTimes, setFreeTimes] = useState();\n  // const [outputReady, setOutputReady] = useState(false)\n\n  const fetchFreeTimes2 = busyTimes => {\n    const startDate = globalStart;\n    const endDate = globalEnd;\n    var daysOfYear = [];\n    for (var d = new Date(startDate); d <= new Date(endDate); d.setDate(d.getDate() + 1)) {\n      daysOfYear.push(new Date(d));\n    }\n    const finalPenguin = [];\n    for (let i = 0; i < daysOfYear.length; i++) {\n      var thisDay = new Date(daysOfYear[i]);\n      var thisDayMorning = new Date(thisDay.setHours(6, 0, 0));\n      var thisDayNight = new Date(thisDayMorning.getYear(), thisDayMorning.getMonth(), thisDayMorning.getDate(), 23);\n      var thisDayBusyTimes = [];\n      for (let x = 0; x < busyTimes.length; x++) {\n        var temp = busyTimes[x];\n        if (sameDay(thisDayMorning, new Date(temp[0]))) {\n          thisDayBusyTimes.push(temp);\n        }\n      }\n      var freeTimes = [];\n      console.log(thisDayBusyTimes);\n      var lastTimeSlot = thisDayBusyTimes.length - 1;\n      console.log(\"LAST TIME SLOT \");\n      console.log(lastTimeSlot);\n      for (let x = 0; x < thisDayBusyTimes.length; x++) {\n        var start = new Date(thisDayBusyTimes[x][0]);\n        var end = new Date(thisDayBusyTimes[x][1]);\n        if (sameDay(thisDayMorning, end)) {\n          if (x === 0) {\n            if (thisDayBusyTimes.length === 1) {\n              var out = [];\n              var k = prettyTime(thisDayMorning);\n              var n = prettyTime(start);\n              out.start = k[1];\n              out.end = n[1];\n              freeTimes.push(out);\n              var outer = [];\n              var e = prettyTime(end);\n              var p = prettyTime(thisDayNight);\n              outer.start = e[1];\n              outer.end = \"onwards\";\n              freeTimes.push(outer);\n            } else {\n              var out = [];\n              var k = prettyTime(thisDayMorning);\n              var n = prettyTime(start);\n              out.start = k[1];\n              out.end = n[1];\n              freeTimes.push(out);\n            }\n          } else {\n            var outhi = [];\n            // end of prev time slot\n            var kk = prettyTime(new Date(thisDayBusyTimes[x - 1][1]));\n            var zz = prettyTime(start);\n            outhi.start = kk[1];\n            outhi.end = zz[1];\n            freeTimes.push(outhi);\n            console.log(\"outhi\");\n            console.log(outhi);\n            var test = new Date(thisDayBusyTimes[x][1]);\n            if (x === thisDayBusyTimes.length - 1) {\n              var tempo = new Date(thisDayBusyTimes[lastTimeSlot][1]);\n              console.log(tempo);\n              var outer = [];\n              var e = prettyTime(tempo);\n              var p = prettyTime(thisDayNight);\n              outer.start = e[1];\n              outer.end = \"onwards\";\n              freeTimes.push(outer);\n            }\n          }\n        }\n      }\n      const output = [String(prettyTime(thisDay)[0]), freeTimes];\n      console.log(output);\n      finalPenguin.push(output);\n    }\n    console.log(finalPenguin);\n    setFreeTimes(finalPenguin);\n    props.setOutputReady(true);\n  };\n  function prettyTime(d1) {\n    var p = String(d1.toLocaleString(\"en-US\", {\n      timeZone: \"America/New_York\"\n    }));\n    var splitted = p.split(\" \");\n    var day = splitted[0];\n    var time = splitted[1] + \" \" + splitted[2];\n    const day2 = day.slice(0, -1);\n    var output = [day2, time];\n    return output;\n  }\n  function sameDay(d1, d2) {\n    return d1.getFullYear() === d2.getFullYear() && d1.getMonth() === d2.getMonth() && d1.getDate() === d2.getDate();\n  }\n\n  // end test\n\n  var globalStart = \"\";\n  var globalEnd = \"\";\n  const fetchFreeTimes = () => {\n    // Format start date to 8am\n    var start = new Date(props.startDate);\n    start.setHours(8);\n    start.setMinutes(0);\n    start.setSeconds(0);\n    start = start.toISOString();\n    globalStart = start;\n\n    // Format end date to 8 pm\n    let end = \"\";\n    if (props.endDate === null) {\n      end = new Date(props.startDate);\n      const piza = new Date(props.startDate);\n      props.setEndDate(piza);\n      end = new Date(piza);\n    } else {\n      end = new Date(props.endDate);\n    }\n    end.setHours(23);\n    end.setMinutes(59);\n    end.setSeconds(0);\n    end = end.toISOString();\n    globalEnd = end;\n    console.log(start);\n    console.log(end);\n\n    // Build request body\n    const request = {};\n    request.timeMin = start;\n    request.timeMax = end;\n    request.timeZone = \"America/New_York\";\n\n    // Create calendars object\n    let cals = [];\n    for (let i = 0; i < props.selectedCalendars.length; i++) {\n      let calObj = {};\n      calObj.id = props.selectedCalendars[i];\n      cals.push(calObj);\n    }\n    request.items = cals;\n    let num_days = \"\";\n    if (props.endDate === null) {\n      let num_days = props.startDate.getDate() - props.startDate.getDate();\n    } else {\n      num_days = props.endDate.getDate() - props.startDate.getDate();\n    }\n    num_days = num_days + 1;\n    return gapi.client.calendar.freebusy.query(request).then(function (response) {\n      let allTimes = [];\n      let fuckme = [];\n      for (let k = 0; k < props.selectedCalendars.length; k++) {\n        var curCal = props.selectedCalendars[k];\n        var busyTimes = response.result.calendars[curCal].busy;\n        for (let i = 0; i < busyTimes.length; i++) {\n          var busyBlock = busyTimes[i];\n          var startTime = busyBlock.start;\n          var endTime = busyBlock.end;\n          var p = prettyTime(startTime)[0];\n          let test = [new Date(startTime), new Date(endTime)];\n          allTimes.push(test);\n        }\n      }\n      const merged = newfunc(allTimes);\n      fetchFreeTimes2(merged);\n    }, function (err) {\n      console.error(\"Execute error\", err);\n    });\n  };\n  const newfunc = times => {\n    console.log(times);\n    console.log(\"woohhoo\");\n    times.sort(function (a, b) {\n      return a[0] - b[0];\n    });\n    const merged = [];\n    for (let i = 0; i < times.length; i++) {\n      if (!merged.length) {\n        merged.push(times[i]);\n      } else if (merged[merged.length - 1][1] < times[i][0]) {\n        merged.push(times[i]);\n      } else {\n        var left = merged[merged.length - 1][1];\n        var right = times[i][1];\n        var comp = Math.max(left, right);\n        console.log(comp);\n        comp = new Date(comp);\n        merged[merged.length - 1][1] = comp;\n      }\n    }\n    for (let i = 0; i < merged.length; i++) {\n      const temp = new Date(merged[i][0]).toLocaleString();\n      const temp2 = new Date(merged[i][1]).toLocaleString();\n    }\n    return merged;\n  };\n  function removeTime(date = new Date()) {\n    return new Date(date.toDateString());\n  }\n  const getDate = inputDate => {\n    const d = new Date(inputDate);\n    const dods = removeTime(d);\n    return dods;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"todo-container\",\n    children: [props.outputReady ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: freeTimes.map(test => {\n        const thisDate = test[0];\n        const thisDateTimeSlots = test[1];\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: [thisDate, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: thisDateTimeSlots.map(item => {\n                console.log(\"item here\");\n                console.log(item);\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [item.start, \" to \", item.end]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 25\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn-upload\",\n      onClick: fetchFreeTimes,\n      children: [\" \", \"Fetch free times\", \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 260,\n    columnNumber: 5\n  }, this);\n};\n_s(CalendarOutput, \"DJ6JTRgv6EuA/Jm8jQ8tceQuON4=\");\n_c = CalendarOutput;\nexport default CalendarOutput;\nvar _c;\n$RefreshReg$(_c, \"CalendarOutput\");","map":{"version":3,"names":["React","Calendar","format","useState","useEffect","jsxDEV","_jsxDEV","CalendarOutput","props","_s","freeTimes","setFreeTimes","fetchFreeTimes2","busyTimes","startDate","globalStart","endDate","globalEnd","daysOfYear","d","Date","setDate","getDate","push","finalPenguin","i","length","thisDay","thisDayMorning","setHours","thisDayNight","getYear","getMonth","thisDayBusyTimes","x","temp","sameDay","console","log","lastTimeSlot","start","end","out","k","prettyTime","n","outer","e","p","outhi","kk","zz","test","tempo","output","String","setOutputReady","d1","toLocaleString","timeZone","splitted","split","day","time","day2","slice","d2","getFullYear","fetchFreeTimes","setMinutes","setSeconds","toISOString","piza","setEndDate","request","timeMin","timeMax","cals","selectedCalendars","calObj","id","items","num_days","gapi","client","calendar","freebusy","query","then","response","allTimes","fuckme","curCal","result","calendars","busy","busyBlock","startTime","endTime","merged","newfunc","err","error","times","sort","a","b","left","right","comp","Math","max","temp2","removeTime","date","toDateString","inputDate","dods","className","children","outputReady","map","thisDate","thisDateTimeSlots","fileName","_jsxFileName","lineNumber","columnNumber","item","onClick","_c","$RefreshReg$"],"sources":["/Users/tucker/git/tmb5cg.github.io/src/components/FreeTimeFinder/CalendarOutput.js"],"sourcesContent":["import React from \"react\";\nimport Calendar from \"./Calendar.js\";\nimport format from \"date-fns/format\";\nimport { useState, useEffect } from \"react\";\n\nconst CalendarOutput = (props) => {\n  const [freeTimes, setFreeTimes] = useState();\n  // const [outputReady, setOutputReady] = useState(false)\n\n  const fetchFreeTimes2 = (busyTimes) => {\n    const startDate = globalStart;\n    const endDate = globalEnd;\n    var daysOfYear = [];\n    for (\n      var d = new Date(startDate);\n      d <= new Date(endDate);\n      d.setDate(d.getDate() + 1)\n    ) {\n      daysOfYear.push(new Date(d));\n    }\n\n    const finalPenguin = [];\n    for (let i = 0; i < daysOfYear.length; i++) {\n      var thisDay = new Date(daysOfYear[i]);\n      var thisDayMorning = new Date(thisDay.setHours(6, 0, 0));\n      var thisDayNight = new Date(\n        thisDayMorning.getYear(),\n        thisDayMorning.getMonth(),\n        thisDayMorning.getDate(),\n        23\n      );\n\n      var thisDayBusyTimes = [];\n      for (let x = 0; x < busyTimes.length; x++) {\n        var temp = busyTimes[x];\n        if (sameDay(thisDayMorning, new Date(temp[0]))) {\n          thisDayBusyTimes.push(temp);\n        }\n      }\n\n      var freeTimes = [];\n      console.log(thisDayBusyTimes);\n      var lastTimeSlot = thisDayBusyTimes.length - 1;\n      console.log(\"LAST TIME SLOT \");\n      console.log(lastTimeSlot);\n      for (let x = 0; x < thisDayBusyTimes.length; x++) {\n        var start = new Date(thisDayBusyTimes[x][0]);\n        var end = new Date(thisDayBusyTimes[x][1]);\n\n        if (sameDay(thisDayMorning, end)) {\n          if (x === 0) {\n            if (thisDayBusyTimes.length === 1) {\n              var out = [];\n              var k = prettyTime(thisDayMorning);\n              var n = prettyTime(start);\n              out.start = k[1];\n              out.end = n[1];\n              freeTimes.push(out);\n\n              var outer = [];\n              var e = prettyTime(end);\n              var p = prettyTime(thisDayNight);\n              outer.start = e[1];\n              outer.end = \"onwards\";\n              freeTimes.push(outer);\n            } else {\n              var out = [];\n              var k = prettyTime(thisDayMorning);\n              var n = prettyTime(start);\n              out.start = k[1];\n              out.end = n[1];\n              freeTimes.push(out);\n            }\n          } else {\n            var outhi = [];\n            // end of prev time slot\n            var kk = prettyTime(new Date(thisDayBusyTimes[x - 1][1]));\n            var zz = prettyTime(start);\n\n            outhi.start = kk[1];\n            outhi.end = zz[1];\n            freeTimes.push(outhi);\n            console.log(\"outhi\");\n            console.log(outhi);\n\n            var test = new Date(thisDayBusyTimes[x][1]);\n\n            if (x === thisDayBusyTimes.length - 1) {\n              var tempo = new Date(thisDayBusyTimes[lastTimeSlot][1]);\n              console.log(tempo);\n              var outer = [];\n              var e = prettyTime(tempo);\n              var p = prettyTime(thisDayNight);\n              outer.start = e[1];\n              outer.end = \"onwards\";\n              freeTimes.push(outer);\n            }\n          }\n        }\n      }\n      const output = [String(prettyTime(thisDay)[0]), freeTimes];\n      console.log(output);\n      finalPenguin.push(output);\n    }\n    console.log(finalPenguin);\n    setFreeTimes(finalPenguin);\n    props.setOutputReady(true);\n  };\n\n  function prettyTime(d1) {\n    var p = String(\n      d1.toLocaleString(\"en-US\", { timeZone: \"America/New_York\" })\n    );\n    var splitted = p.split(\" \");\n    var day = splitted[0];\n    var time = splitted[1] + \" \" + splitted[2];\n\n    const day2 = day.slice(0, -1);\n    var output = [day2, time];\n\n    return output;\n  }\n\n  function sameDay(d1, d2) {\n    return (\n      d1.getFullYear() === d2.getFullYear() &&\n      d1.getMonth() === d2.getMonth() &&\n      d1.getDate() === d2.getDate()\n    );\n  }\n\n  // end test\n\n  var globalStart = \"\";\n  var globalEnd = \"\";\n  const fetchFreeTimes = () => {\n    // Format start date to 8am\n    var start = new Date(props.startDate);\n    start.setHours(8);\n    start.setMinutes(0);\n    start.setSeconds(0);\n    start = start.toISOString();\n    globalStart = start;\n\n    // Format end date to 8 pm\n    let end = \"\";\n    if (props.endDate === null) {\n      end = new Date(props.startDate);\n      const piza = new Date(props.startDate);\n      props.setEndDate(piza);\n      end = new Date(piza);\n    } else {\n      end = new Date(props.endDate);\n    }\n    end.setHours(23);\n    end.setMinutes(59);\n    end.setSeconds(0);\n    end = end.toISOString();\n    globalEnd = end;\n\n    console.log(start);\n    console.log(end);\n\n    // Build request body\n    const request = {};\n    request.timeMin = start;\n    request.timeMax = end;\n    request.timeZone = \"America/New_York\";\n\n    // Create calendars object\n    let cals = [];\n    for (let i = 0; i < props.selectedCalendars.length; i++) {\n      let calObj = {};\n      calObj.id = props.selectedCalendars[i];\n      cals.push(calObj);\n    }\n\n    request.items = cals;\n\n    let num_days = \"\";\n    if (props.endDate === null) {\n      let num_days = props.startDate.getDate() - props.startDate.getDate();\n    } else {\n      num_days = props.endDate.getDate() - props.startDate.getDate();\n    }\n    num_days = num_days + 1;\n\n    return gapi.client.calendar.freebusy\n      .query(request)\n\n      .then(\n        function (response) {\n          let allTimes = [];\n          let fuckme = [];\n          for (let k = 0; k < props.selectedCalendars.length; k++) {\n            var curCal = props.selectedCalendars[k];\n            var busyTimes = response.result.calendars[curCal].busy;\n\n            for (let i = 0; i < busyTimes.length; i++) {\n              var busyBlock = busyTimes[i];\n              var startTime = busyBlock.start;\n              var endTime = busyBlock.end;\n              var p = prettyTime(startTime)[0];\n              let test = [new Date(startTime), new Date(endTime)];\n              allTimes.push(test);\n            }\n          }\n          const merged = newfunc(allTimes);\n          fetchFreeTimes2(merged);\n        },\n        function (err) {\n          console.error(\"Execute error\", err);\n        }\n      );\n  };\n\n  const newfunc = (times) => {\n    console.log(times);\n    console.log(\"woohhoo\");\n    times.sort(function (a, b) {\n      return a[0] - b[0];\n    });\n\n    const merged = [];\n    for (let i = 0; i < times.length; i++) {\n      if (!merged.length) {\n        merged.push(times[i]);\n      } else if (merged[merged.length - 1][1] < times[i][0]) {\n        merged.push(times[i]);\n      } else {\n        var left = merged[merged.length - 1][1];\n        var right = times[i][1];\n\n        var comp = Math.max(left, right);\n        console.log(comp);\n        comp = new Date(comp);\n        merged[merged.length - 1][1] = comp;\n      }\n    }\n\n    for (let i = 0; i < merged.length; i++) {\n      const temp = new Date(merged[i][0]).toLocaleString();\n      const temp2 = new Date(merged[i][1]).toLocaleString();\n    }\n\n    return merged;\n  };\n\n  function removeTime(date = new Date()) {\n    return new Date(date.toDateString());\n  }\n\n  const getDate = (inputDate) => {\n    const d = new Date(inputDate);\n    const dods = removeTime(d);\n    return dods;\n  };\n\n  return (\n    <div className=\"todo-container\">\n      {props.outputReady ? (\n        <div>\n          {freeTimes.map((test) => {\n            const thisDate = test[0];\n            const thisDateTimeSlots = test[1];\n            return (\n              <div>\n                <div>\n                  <h2>{thisDate}:</h2>\n                  <ul>\n                    {thisDateTimeSlots.map((item) => {\n                      console.log(\"item here\");\n                      console.log(item);\n                      return (\n                        <div>\n                          <li>\n                            {item.start} to {item.end}\n                          </li>\n                          {/* <p>Start time: {item.start}</p>\n                            <p>End time: {item.end}</p> */}\n                        </div>\n                      );\n                    })}\n                  </ul>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      ) : (\n        <button className=\"btn-upload\" onClick={fetchFreeTimes}>\n          {\" \"}\n          Fetch free times{\" \"}\n        </button>\n      )}\n      <br />\n      <br />\n    </div>\n  );\n};\n\nexport default CalendarOutput;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}