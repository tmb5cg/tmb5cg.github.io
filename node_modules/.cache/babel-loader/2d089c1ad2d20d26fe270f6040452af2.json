{"ast":null,"code":"var _jsxFileName = \"/Users/tucker/Documents/GitHub/tmb5cg.github.io/src/components/GroceryLister/SubmitRecipeForm.js\";\nimport * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport Paper from \"@mui/material/Paper\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SubmitRecipeForm = props => {\n  const handleTextboxChange = event => {\n    props.setInputUrl(event.target.value);\n  };\n\n  const handleClick = () => {\n    getIngredients(props.inputUrl);\n  };\n\n  const getIngredients = function (e) {\n    if (isValidHttpUrl(props.inputUrl)) {\n      console.log(\"yes\");\n      axios({\n        method: \"POST\",\n        url: \"https://scanned-photo-split.herokuapp.com/getingredients?url=\" + props.inputUrl,\n        // url: \"http://127.0.0.1:5000/getingredients?url=\" + url,\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }).then(function (response) {\n        console.log(response.data); // insert useeffect here\n\n        var newIngredients = [];\n\n        for (let i = 0; i < response.data.ingredients.length; i++) {\n          // var newIngredient = createData(Math.random() * 1000, response.data.name, response.data.ingredients[i])\n          var newIngredient = createData(Math.random() * 1000, response.data.ingredients[i], response.data.detailed[i][\"name\"], response.data.detailed[i][\"qty\"], response.data.detailed[i][\"unit\"]);\n          newIngredients.push(newIngredient);\n        }\n\n        props.setIngredients(props.ingredients.concat(newIngredients));\n        props.setUrls([...props.urls, props.inputUrl]);\n      }).catch(function (response) {\n        console.log(\"error\");\n      });\n    } else {\n      console.log(\"invalid\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"upload-container\",\n      onSubmit: e => e.preventDefault(),\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        ref: inputRef,\n        placeholder: \"Recipe URL\",\n        onChange: handleTextboxChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-70\",\n        onClick: handleClick,\n        children: \"Fetch ingredients\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n\n_c = SubmitRecipeForm;\n\nfunction createData(id, name, ingredient, unit, qty) {\n  return {\n    id,\n    name,\n    ingredient,\n    qty,\n    unit\n  };\n}\n\nfunction isValidHttpUrl(string) {\n  let url;\n\n  try {\n    url = new URL(string);\n  } catch (_) {\n    return false;\n  }\n\n  return url.protocol === \"http:\" || url.protocol === \"https:\";\n}\n\nexport default SubmitRecipeForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"SubmitRecipeForm\");","map":{"version":3,"names":["React","Link","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","useState","useEffect","axios","SubmitRecipeForm","props","handleTextboxChange","event","setInputUrl","target","value","handleClick","getIngredients","inputUrl","e","isValidHttpUrl","console","log","method","url","headers","then","response","data","newIngredients","i","ingredients","length","newIngredient","createData","Math","random","detailed","push","setIngredients","concat","setUrls","urls","catch","preventDefault","inputRef","id","name","ingredient","unit","qty","string","URL","_","protocol"],"sources":["/Users/tucker/Documents/GitHub/tmb5cg.github.io/src/components/GroceryLister/SubmitRecipeForm.js"],"sourcesContent":["import * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport Paper from \"@mui/material/Paper\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst SubmitRecipeForm = (props) => {\n  const handleTextboxChange = (event) => {\n    props.setInputUrl(event.target.value);\n  };\n\n  const handleClick = () => {\n    getIngredients(props.inputUrl);\n  };\n\n  const getIngredients = function (e) {\n    if (isValidHttpUrl(props.inputUrl)) {\n      console.log(\"yes\");\n      axios({\n        method: \"POST\",\n        url:\n          \"https://scanned-photo-split.herokuapp.com/getingredients?url=\" +\n          props.inputUrl,\n        // url: \"http://127.0.0.1:5000/getingredients?url=\" + url,\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      })\n        .then(function (response) {\n          console.log(response.data);\n          // insert useeffect here\n          var newIngredients = [];\n          for (let i = 0; i < response.data.ingredients.length; i++) {\n            // var newIngredient = createData(Math.random() * 1000, response.data.name, response.data.ingredients[i])\n            var newIngredient = createData(\n              Math.random() * 1000,\n              response.data.ingredients[i],\n              response.data.detailed[i][\"name\"],\n              response.data.detailed[i][\"qty\"],\n              response.data.detailed[i][\"unit\"]\n            );\n            newIngredients.push(newIngredient);\n          }\n          props.setIngredients(props.ingredients.concat(newIngredients));\n          props.setUrls([...props.urls, props.inputUrl]);\n        })\n        .catch(function (response) {\n          console.log(\"error\");\n        });\n    } else {\n      console.log(\"invalid\");\n    }\n  };\n  return (\n    <div>\n      <form className=\"upload-container\" onSubmit={(e) => e.preventDefault()}>\n        <input\n          type=\"text\"\n          ref={inputRef}\n          placeholder=\"Recipe URL\"\n          onChange={handleTextboxChange}\n        />\n        <button className=\"button-70\" onClick={handleClick}>\n          Fetch ingredients\n        </button>{\" \"}\n      </form>\n    </div>\n  );\n};\n\nfunction createData(id, name, ingredient, unit, qty) {\n  return { id, name, ingredient, qty, unit };\n}\n\nfunction isValidHttpUrl(string) {\n  let url;\n  try {\n    url = new URL(string);\n  } catch (_) {\n    return false;\n  }\n  return url.protocol === \"http:\" || url.protocol === \"https:\";\n}\n\nexport default SubmitRecipeForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}