{"ast":null,"code":"import _slicedToArray from\"/Users/tucker/Documents/GitHub/photoscan_splitter/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import axios from\"axios\";import{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DragDropFile=function DragDropFile(props){// drag state\nvar _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),dragActive=_React$useState2[0],setDragActive=_React$useState2[1];// ref\nvar inputRef=React.useRef(null);// handle drag events\nvar handleDrag=function handleDrag(e){e.preventDefault();e.stopPropagation();if(e.type===\"dragenter\"||e.type===\"dragover\"){setDragActive(true);}else if(e.type===\"dragleave\"){setDragActive(false);}};// triggers when file is dropped\nvar handleDrop=function handleDrop(e){e.preventDefault();e.stopPropagation();setDragActive(false);if(e.dataTransfer.files&&e.dataTransfer.files[0]){handleFileChange(e.dataTransfer.files[0]);}};// triggers when file is selected with click\nvar handleChange=function handleChange(e){e.preventDefault();if(e.target.files&&e.target.files[0]){handleFileChange(e.target.files[0]);}};// triggers the input when the button is clicked\nvar onButtonClick=function onButtonClick(){inputRef.current.click();};// fake sleep function\nvar sleep=function sleep(ms){return new Promise(function(r){return setTimeout(r,ms);});};// uploads\nvar handleFileChange=function handleFileChange(e){var data=new FormData();data.append('image',e);axios({method:\"POST\",url:\"http://www.autocropper.io/getscans\",data:data,headers:{\"Content-Type\":\"multipart/form-data\"}}).then(function(response){//handle success\nconsole.log(response.data);props.setImageProcessing(true);props.setProcessedImages(response.data.images);}).catch(function(response){//handle error\nconsole.log(\"error\");});};return/*#__PURE__*/_jsxs(\"form\",{className:\"upload-container\",onDragEnter:handleDrag,onSubmit:function onSubmit(e){return e.preventDefault();},children:[/*#__PURE__*/_jsx(\"input\",{ref:inputRef,type:\"file\",id:\"input-file-upload\",multiple:true,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{id:\"label-file-upload\",htmlFor:\"input-file-upload\",className:dragActive?\"drag-active\":\"\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-download\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Select a file or drag here\"}),/*#__PURE__*/_jsx(\"div\",{className:\"upload-btn-wrapper\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:onButtonClick,children:\"Select a file\"})})]})}),dragActive&&/*#__PURE__*/_jsx(\"div\",{id:\"drag-file-element\",onDragEnter:handleDrag,onDragLeave:handleDrag,onDragOver:handleDrag,onDrop:handleDrop})]});};export default DragDropFile;","map":{"version":3,"names":["React","axios","useState","useEffect","DragDropFile","props","dragActive","setDragActive","inputRef","useRef","handleDrag","e","preventDefault","stopPropagation","type","handleDrop","dataTransfer","files","handleFileChange","handleChange","target","onButtonClick","current","click","sleep","ms","Promise","r","setTimeout","data","FormData","append","method","url","headers","then","response","console","log","setImageProcessing","setProcessedImages","images","catch"],"sources":["/Users/tucker/Documents/GitHub/photoscan_splitter/client/src/pages/DragDropFile.js"],"sourcesContent":["import React from \"react\"\nimport axios from \"axios\";\nimport { useState, useEffect} from 'react'\n\n\nconst DragDropFile = (props) => {\n    // drag state\n    const [dragActive, setDragActive] = React.useState(false);\n    // ref\n    const inputRef = React.useRef(null);\n    \n    // handle drag events\n    const handleDrag = function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      if (e.type === \"dragenter\" || e.type === \"dragover\") {\n        setDragActive(true);\n      } else if (e.type === \"dragleave\") {\n        setDragActive(false);\n      }\n    };\n    \n    // triggers when file is dropped\n    const handleDrop = function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      setDragActive(false);\n      if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n        handleFileChange(e.dataTransfer.files[0]);\n      }\n    };\n    \n    // triggers when file is selected with click\n    const handleChange = function(e) {\n      e.preventDefault();\n      if (e.target.files && e.target.files[0]) {\n        handleFileChange(e.target.files[0]);\n      }\n    };\n    \n  // triggers the input when the button is clicked\n    const onButtonClick = () => {\n      inputRef.current.click();\n    };\n\n    // fake sleep function\n    const sleep = ms => new Promise(r => setTimeout(r, ms));\n\n\n    // uploads\n    const handleFileChange = function(e) {\n      var data = new FormData();    \n      data.append('image', e)\n  \n      axios({\n          method: \"POST\",\n          url: \"http://www.autocropper.io/getscans\",\n          data: data,\n          headers: { \"Content-Type\": \"multipart/form-data\" },\n        }).then(function (response) {\n            //handle success\n            console.log(response.data);\n            props.setImageProcessing(true);\n            props.setProcessedImages(response.data.images)\n          }).catch(function (response) {\n            //handle error\n            console.log(\"error\");\n          });\n  }\n    \n    return (\n      <form className=\"upload-container\" onDragEnter={handleDrag} onSubmit={(e) => e.preventDefault()}>\n        <input ref={inputRef} type=\"file\" id=\"input-file-upload\" multiple={true} onChange={handleChange} />\n        <label id=\"label-file-upload\" htmlFor=\"input-file-upload\" className={dragActive ? \"drag-active\" : \"\" }>\n          <div>\n          <i class=\"fa fa-download\" aria-hidden=\"true\"></i>\n            <p>Select a file or drag here</p>\n            <div className=\"upload-btn-wrapper\"><button className=\"btn\" onClick={onButtonClick}>Select a file</button></div>\n          </div> \n        </label>\n        { dragActive && <div id=\"drag-file-element\" onDragEnter={handleDrag} onDragLeave={handleDrag} onDragOver={handleDrag} onDrop={handleDrop}></div> }\n      </form>\n    );\n  };\n  \n  export default DragDropFile;"],"mappings":"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"},"metadata":{},"sourceType":"module"}