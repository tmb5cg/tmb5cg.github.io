{"ast":null,"code":"var _jsxFileName = \"/Users/tucker/Documents/GitHub/tmb5cg.github.io/src/components/GroceryLister/GroceryLister.js\",\n    _s = $RefreshSig$();\n\nimport * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport Paper from \"@mui/material/Paper\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport IngredientList from \"./IngredientList\";\nimport RecipeList from \"./RecipeList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction createData(id, name, ingredient, unit, qty) {\n  return {\n    id,\n    name,\n    ingredient,\n    qty,\n    unit\n  };\n}\n\nfunction isValidHttpUrl(string) {\n  let url;\n\n  try {\n    url = new URL(string);\n  } catch (_) {\n    return false;\n  }\n\n  return url.protocol === \"http:\" || url.protocol === \"https:\";\n}\n\nconst GroceryLister = () => {\n  _s();\n\n  const [inputUrl, setInputUrl] = useState(\"\");\n  const [urls, setUrls] = useState([]);\n  const [ingredients, setIngredients] = useState([]);\n  const inputRef = React.useRef(null);\n  useEffect(() => {\n    getLocalIngredients();\n  }, []); // if ingredients ever changes ie new ones, update local storage\n\n  useEffect(() => {\n    saveLocalIngredients();\n  }, [ingredients]);\n\n  const getLocalIngredients = () => {\n    if (localStorage.getItem(\"ingredients\") === null) {\n      localStorage.setItem(\"ingredients\", JSON.stringify([]));\n    } else {\n      let todoLocal = JSON.parse(localStorage.getItem(\"ingredients\"));\n      setIngredients(todoLocal);\n    }\n  };\n\n  const saveLocalIngredients = () => {\n    localStorage.setItem(\"ingredients\", JSON.stringify(ingredients));\n  }; // const handleTextboxChange = (event) => {\n  //   setInputUrl(event.target.value);\n  // };\n  // const handleClick = () => {\n  //   getIngredients(inputUrl);\n  // };\n  // const getIngredients = function (e) {\n  //   if (isValidHttpUrl(inputUrl)) {\n  //     console.log(\"yes\");\n  //     axios({\n  //       method: \"POST\",\n  //       url:\n  //         \"https://scanned-photo-split.herokuapp.com/getingredients?url=\" +\n  //         inputUrl,\n  //       // url: \"http://127.0.0.1:5000/getingredients?url=\" + url,\n  //       headers: { \"Content-Type\": \"multipart/form-data\" },\n  //     })\n  //       .then(function (response) {\n  //         console.log(response.data);\n  //         // insert useeffect here\n  //         var newIngredients = [];\n  //         for (let i = 0; i < response.data.ingredients.length; i++) {\n  //           // var newIngredient = createData(Math.random() * 1000, response.data.name, response.data.ingredients[i])\n  //           var newIngredient = createData(\n  //             Math.random() * 1000,\n  //             response.data.ingredients[i],\n  //             response.data.detailed[i][\"name\"],\n  //             response.data.detailed[i][\"qty\"],\n  //             response.data.detailed[i][\"unit\"]\n  //           );\n  //           newIngredients.push(newIngredient);\n  //         }\n  //         setIngredients(ingredients.concat(newIngredients));\n  //         setUrls([...urls, inputUrl]);\n  //       })\n  //       .catch(function (response) {\n  //         console.log(\"error\");\n  //       });\n  //   } else {\n  //     console.log(\"invalid\");\n  //   }\n  // };\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Extract ingredients from any recipe URL\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Recipe, {\n        inputUrl: inputUrl,\n        setInputUrl: setInputUrl,\n        urls: urls,\n        setUrls: setUrls,\n        ingredients: ingredients,\n        setIngredients: setIngredients\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(RecipeList, {\n        recipes: urls\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(IngredientList, {\n        ingredients: ingredients,\n        setIngredients: setIngredients\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n\n_s(GroceryLister, \"CNUdlRBW6V/5V32QNNEcDjw0nt0=\");\n\n_c = GroceryLister;\nexport default GroceryLister;\n\nvar _c;\n\n$RefreshReg$(_c, \"GroceryLister\");","map":{"version":3,"names":["React","Link","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","useState","useEffect","axios","IngredientList","RecipeList","createData","id","name","ingredient","unit","qty","isValidHttpUrl","string","url","URL","_","protocol","GroceryLister","inputUrl","setInputUrl","urls","setUrls","ingredients","setIngredients","inputRef","useRef","getLocalIngredients","saveLocalIngredients","localStorage","getItem","setItem","JSON","stringify","todoLocal","parse"],"sources":["/Users/tucker/Documents/GitHub/tmb5cg.github.io/src/components/GroceryLister/GroceryLister.js"],"sourcesContent":["import * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport Paper from \"@mui/material/Paper\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport IngredientList from \"./IngredientList\";\nimport RecipeList from \"./RecipeList\";\n\nfunction createData(id, name, ingredient, unit, qty) {\n  return { id, name, ingredient, qty, unit };\n}\n\nfunction isValidHttpUrl(string) {\n  let url;\n  try {\n    url = new URL(string);\n  } catch (_) {\n    return false;\n  }\n  return url.protocol === \"http:\" || url.protocol === \"https:\";\n}\n\nconst GroceryLister = () => {\n  const [inputUrl, setInputUrl] = useState(\"\");\n  const [urls, setUrls] = useState([]);\n  const [ingredients, setIngredients] = useState([]);\n  const inputRef = React.useRef(null);\n\n  useEffect(() => {\n    getLocalIngredients();\n  }, []);\n\n  // if ingredients ever changes ie new ones, update local storage\n  useEffect(() => {\n    saveLocalIngredients();\n  }, [ingredients]);\n\n  const getLocalIngredients = () => {\n    if (localStorage.getItem(\"ingredients\") === null) {\n      localStorage.setItem(\"ingredients\", JSON.stringify([]));\n    } else {\n      let todoLocal = JSON.parse(localStorage.getItem(\"ingredients\"));\n      setIngredients(todoLocal);\n    }\n  };\n\n  const saveLocalIngredients = () => {\n    localStorage.setItem(\"ingredients\", JSON.stringify(ingredients));\n  };\n\n  // const handleTextboxChange = (event) => {\n  //   setInputUrl(event.target.value);\n  // };\n\n  // const handleClick = () => {\n  //   getIngredients(inputUrl);\n  // };\n\n  // const getIngredients = function (e) {\n  //   if (isValidHttpUrl(inputUrl)) {\n  //     console.log(\"yes\");\n  //     axios({\n  //       method: \"POST\",\n  //       url:\n  //         \"https://scanned-photo-split.herokuapp.com/getingredients?url=\" +\n  //         inputUrl,\n  //       // url: \"http://127.0.0.1:5000/getingredients?url=\" + url,\n  //       headers: { \"Content-Type\": \"multipart/form-data\" },\n  //     })\n  //       .then(function (response) {\n  //         console.log(response.data);\n  //         // insert useeffect here\n  //         var newIngredients = [];\n  //         for (let i = 0; i < response.data.ingredients.length; i++) {\n  //           // var newIngredient = createData(Math.random() * 1000, response.data.name, response.data.ingredients[i])\n  //           var newIngredient = createData(\n  //             Math.random() * 1000,\n  //             response.data.ingredients[i],\n  //             response.data.detailed[i][\"name\"],\n  //             response.data.detailed[i][\"qty\"],\n  //             response.data.detailed[i][\"unit\"]\n  //           );\n  //           newIngredients.push(newIngredient);\n  //         }\n  //         setIngredients(ingredients.concat(newIngredients));\n  //         setUrls([...urls, inputUrl]);\n  //       })\n  //       .catch(function (response) {\n  //         console.log(\"error\");\n  //       });\n  //   } else {\n  //     console.log(\"invalid\");\n  //   }\n  // };\n\n  return (\n    <div>\n      <h3>Extract ingredients from any recipe URL</h3>\n      <h4></h4>\n\n      {/* <form className=\"upload-container\" onSubmit={(e) => e.preventDefault()}>\n        <input\n          type=\"text\"\n          ref={inputRef}\n          placeholder=\"Recipe URL\"\n          onChange={handleTextboxChange}\n        />\n        <button className=\"button-70\" onClick={handleClick}>\n          Fetch ingredients\n        </button>{\" \"}\n      </form> */}\n\n      <div>\n        <Recipe\n          inputUrl={inputUrl}\n          setInputUrl={setInputUrl}\n          urls={urls}\n          setUrls={setUrls}\n          ingredients={ingredients}\n          setIngredients={setIngredients}\n        />\n      </div>\n      <div>\n        <RecipeList recipes={urls} />\n      </div>\n\n      <br></br>\n\n      <div>\n        <IngredientList\n          ingredients={ingredients}\n          setIngredients={setIngredients}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default GroceryLister;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}